(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{A8Ph:function(t,e,c){"use strict";c.r(e),c.d(e,"JobsModule",(function(){return H}));var n=c("ofXK"),s=c("aceb"),i=c("LPYB"),r=c("JU/d"),o=c("FTbq"),a=c("V2v1"),d=c("G3Ii"),l=c("tyNb"),u=c("U5lE"),b=c("x0Mr"),p=c("XNiG"),g=c("itXk"),h=c("lJxs"),m=c("GJmQ"),f=c("JYL7"),O=c("1uah"),v=c("LRne"),M=c("zp1y"),w=c("eIep"),x=c("bOdf"),k=c("3E0/"),y=c("fXoL"),C=c("L7Zs");function S(t,e){if(1&t){const t=y.fc();y.ec(0,"nb-list-item",4),y.mc("click",(function(c){y.Kc(t);const n=e.index,s=y.oc();return s.check[n]=!s.check[n],c.preventDefault()})),y.ec(1,"nb-checkbox",5),y.mc("checkedChange",(function(c){y.Kc(t);const n=e.index;return y.oc().check[n]=c})),y.dc(),y.ec(2,"label"),y.Uc(3),y.dc(),y.dc()}if(2&t){const t=e.$implicit,c=e.index,n=y.oc();y.Mb(1),y.wc("checked",n.check[c]),y.Mb(2),y.Vc(t)}}let $=(()=>{class t{constructor(t,e){this.dialog=t,this.cmdService=e,this.finishedGroup=[],this.check=[],this.loading=!1,this.deleteTrigger=new p.a,this.context=t.context}confirm(){this.deleteTrigger.next(this.finishedGroup.filter((t,e)=>this.check[e])),this.dialog.close()}ngOnInit(){const t=this,e=new p.a,c=new class extends f.i{constructor(){super(...arguments),this.prerequest$=e.pipe(Object(M.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(h.a)(t=>t[1]))}};c.deploy();const n=new class extends f.e{constructor(){super(...arguments),this.prerequest$=e.pipe(Object(M.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(h.a)(t=>t[1]))}};n.deploy(),this.loading=!0,c.clearCache(),n.clearCache(),Object(O.a)(c.getOutput(),n.getOutput()).subscribe(([t,e])=>{if(this.loading=!1,0!==t[1].length||0!==e[1].length)return;const c=e[0]["core-stats"].transferring;this.finishedGroup=c?t[0].groups.filter(t=>!c.some(e=>t===e.group)):t[0].groups,this.check=this.finishedGroup.map(()=>!0)}),e.next(),this.deleteStates$=new class extends f.d{constructor(){super(...arguments),this.prerequest$=t.deleteTrigger.pipe(Object(M.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(w.a)(([t,e])=>0!==e[1].length?Object(v.a)([{},e[1]]):Object(v.a)(...t.map(t=>[Object.assign(Object.assign({},e[0]),{group:t}),[]]))),Object(x.a)(t=>Object(v.a)(t).pipe(Object(k.a)(1e3))))}},this.deleteStates$.deploy(),this.deleteStates$.getOutput().subscribe()}}return t.\u0275fac=function(e){return new(e||t)(y.Yb(u.d),y.Yb(C.a))},t.\u0275cmp=y.Sb({type:t,selectors:[["ng-component"]],decls:11,vars:2,consts:[["spinnerMessage","Loading...",3,"nbSpinner"],[3,"click",4,"ngFor","ngForOf"],["nbButton","","status","danger",3,"click"],["nbButton","","status","success",1,"push-to-right",3,"click"],[3,"click"],[3,"checked","checkedChange"]],template:function(t,e){1&t&&(y.ec(0,"nb-card"),y.ec(1,"nb-card-header"),y.Uc(2," Select groups to be deleted "),y.dc(),y.ec(3,"nb-card-body",0),y.ec(4,"nb-list"),y.Sc(5,S,4,2,"nb-list-item",1),y.dc(),y.dc(),y.ec(6,"nb-card-footer"),y.ec(7,"button",2),y.mc("click",(function(){return e.dialog.dismiss()})),y.Uc(8,"Close"),y.dc(),y.ec(9,"button",3),y.mc("click",(function(){return e.confirm()})),y.Uc(10," Confirm "),y.dc(),y.dc(),y.dc()),2&t&&(y.Mb(3),y.wc("nbSpinner",e.loading),y.Mb(2),y.wc("ngForOf",e.finishedGroup))},directives:[s.o,s.r,s.n,s.ab,s.J,n.n,s.p,s.k,s.K,s.t],styles:["nb-card[_ngcontent-%COMP%] {\n\t\t\t\tmargin: calc(-1em - 5px);\n\t\t\t}\n\t\t\tnb-card-header[_ngcontent-%COMP%], nb-card-footer[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\tlabel[_ngcontent-%COMP%] {\n\t\t\t\tpadding-left: 0.75rem;\n\t\t\t}\n\t\t\t.push-to-right[_ngcontent-%COMP%] {\n\t\t\t\tmargin-left: auto;\n\t\t\t}"]}),t})();function j(t,e){1&t&&(y.Zb(0,"nb-icon",2),y.Uc(1," Reset stats "))}let G=(()=>{class t{constructor(t,e,c){this.contextMenuService=t,this.cmdService=e,this.toastrService=c,this.resetTrigger=new p.a}onContextMenu(t,e){this.contextMenuService.show.next({contextMenu:this.contextMenu,event:t,item:e}),t.preventDefault(),t.stopPropagation()}resetStats(t){this.resetTrigger.next(t)}ngOnInit(){const t=this;this.resetStats$=new class extends f.f{constructor(){super(...arguments),this.prerequest$=t.resetTrigger.pipe(Object(M.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(h.a)(([t,e])=>0!==e[1].length?[{},e[1]]:t&&""!==t?[Object.assign(Object.assign({},e[0]),{group:t}),[]]:e))}},this.resetStats$.deploy(),this.resetStats$.getSupersetOutput().subscribe(t=>{let e=t[0]&&t[0].group;e||(e="[All]"),0===t[1].length?this.toastrService.success(`${e}`,"Reset stats success"):this.toastrService.danger(`${e}`,"Reset stats failure")})}}return t.\u0275fac=function(e){return new(e||t)(y.Yb(r.c),y.Yb(C.a),y.Yb(s.mb))},t.\u0275cmp=y.Sb({type:t,selectors:[["app-job-group-options-context-menu"]],inputs:{contextMenu:"contextMenu"},decls:3,vars:0,consts:[["OptionMenu",""],["contextMenuItem","",3,"execute"],["icon","refresh"]],template:function(t,e){1&t&&(y.ec(0,"context-menu",null,0),y.Sc(2,j,2,0,"ng-template",1),y.mc("execute",(function(t){return e.resetStats(t.item)})),y.dc())},directives:[r.a,r.d,s.z],encapsulation:2}),t})();var P=c("gVoi"),U=c("3RaO"),_=c("HRdY"),K=c("QKBS");function T(t,e){if(1&t&&(y.ec(0,"td"),y.Uc(1),y.dc(),y.ec(2,"td"),y.Uc(3),y.dc(),y.ec(4,"td"),y.Uc(5),y.dc(),y.ec(6,"td"),y.Uc(7),y.dc(),y.ec(8,"td"),y.Uc(9),y.dc()),2&t){const t=e.$implicit;y.Mb(1),y.Vc(t.name),y.Mb(2),y.Vc(t.sizeHumanReadable),y.Mb(2),y.Vc(t.percentage),y.Mb(2),y.Vc(t.speedHumanReadable),y.Mb(2),y.Vc(t.etaHumanReadable)}}let z=(()=>{class t{constructor(){this.columns=[{key:"name",title:"Name"},{key:"size",title:"Size"},{key:"percentage",title:"Percentage"},{key:"speed",title:"Speed"},{key:"eta",title:"eta"}],this.data=[]}ngOnInit(){this.stats$.getOutput().subscribe(([t,e])=>{0===e.length&&(this.data=t["core-stats"].transferring||[],this.data.forEach(t=>{t.sizeHumanReadable=Object(_.a)(t.size,3),t.speedHumanReadable=Object(_.a)(t.speed)+"/s",t.etaHumanReadable="number"==typeof t.eta?K.a.humanize(1e3*t.eta,{largest:3}):"-"}))}),this.configuration=Object.assign({},o.c),this.configuration.searchEnabled=!0,this.configuration.isLoading=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=y.Sb({type:t,selectors:[["app-jobs-transferring"]],inputs:{stats$:"stats$"},decls:2,vars:3,consts:[[3,"configuration","data","columns"]],template:function(t,e){1&t&&(y.ec(0,"ngx-table",0),y.Sc(1,T,10,5,"ng-template"),y.dc()),2&t&&y.wc("configuration",e.configuration)("data",e.data)("columns",e.columns)},directives:[o.b],encapsulation:2}),t})();const I=function(t){return{"active-group":t}};function B(t,e){if(1&t){const t=y.fc();y.ec(0,"nb-list-item",15),y.mc("click",(function(){y.Kc(t);const c=e.$implicit;return y.oc(2).activateGroup(c)})),y.Uc(1),y.ec(2,"nb-icon",16),y.mc("click",(function(c){y.Kc(t);const n=e.$implicit;return y.oc(2),y.Gc(3).onContextMenu(c,n)})),y.dc(),y.dc()}if(2&t){const t=e.$implicit,c=y.oc(2);y.wc("ngClass",y.Ac(2,I,c.activeGroup===t)),y.Mb(1),y.Wc(" ",t," ")}}const L=function(t){return{"infinte-rotate":t}};function R(t,e){if(1&t){const t=y.fc();y.ec(0,"nb-sidebar",12),y.ec(1,"nb-card-header"),y.Uc(2," Groups "),y.ec(3,"nb-icon",13),y.mc("click",(function(){return y.Kc(t),y.oc().clearGroups()})),y.dc(),y.ec(4,"nb-icon",14),y.mc("click",(function(){return y.Kc(t),y.oc().refreshList()})),y.dc(),y.dc(),y.ec(5,"nb-list"),y.ec(6,"nb-list-item",15),y.mc("click",(function(){return y.Kc(t),y.oc().activateGroup("")})),y.Uc(7," [All] "),y.ec(8,"nb-icon",16),y.mc("click",(function(e){return y.Kc(t),y.oc(),y.Gc(3).onContextMenu(e,"")})),y.dc(),y.dc(),y.Sc(9,B,3,4,"nb-list-item",17),y.dc(),y.dc()}if(2&t){const t=y.oc();y.Mb(4),y.wc("ngClass",y.Ac(3,L,t.refreshing)),y.Mb(2),y.wc("ngClass",y.Ac(5,I,""===t.activeGroup)),y.Mb(3),y.wc("ngForOf",t.groups)}}function F(t,e){if(1&t&&(y.ec(0,"nb-option",22),y.Uc(1),y.dc()),2&t){const t=e.$implicit;y.wc("value",t),y.Mb(1),y.Wc(" ",t,"")}}function V(t,e){if(1&t){const t=y.fc();y.ec(0,"nb-card"),y.ec(1,"nb-card-header"),y.ec(2,"nb-icon",18),y.mc("click",(function(){return y.Kc(t),y.oc().clearGroups()})),y.dc(),y.ec(3,"nb-select",19),y.mc("selectedChange",(function(e){return y.Kc(t),y.oc().activeGroup=e}))("selectedChange",(function(){y.Kc(t);const e=y.oc();return e.activateGroup(e.activeGroup)})),y.ec(4,"nb-option",20),y.Uc(5,"[All]"),y.dc(),y.Sc(6,F,2,2,"nb-option",21),y.dc(),y.ec(7,"nb-icon",14),y.mc("click",(function(){return y.Kc(t),y.oc().refreshList()})),y.dc(),y.dc(),y.dc()}if(2&t){const t=y.oc();y.Mb(3),y.wc("selected",t.activeGroup),y.Mb(3),y.wc("ngForOf",t.groups),y.Mb(1),y.wc("ngClass",y.Ac(3,L,t.refreshing))}}function Y(t,e){if(1&t){const t=y.fc();y.ec(0,"nb-icon",16),y.mc("click",(function(e){y.Kc(t);const c=y.oc();return y.Gc(3).onContextMenu(e,c.activeGroup)})),y.dc()}}const J=function(){return["xl","lg","md"]},A=[{path:"",component:(()=>{class t{constructor(t,e){this.cmdService=t,this.modal=e,this.activeGroup="",this.groups=[],this.listTrigger=new p.a,this.statsTrigger=new p.a,this.visable=!1,this.refreshing=!1}activateGroup(t){this.activeGroup=t,this.statsTrigger.next(t)}clearGroups(){this.modal.confirm().className("flat-attack").message("Cleaning finished groups?").isBlocking(!0).open().result.then(t=>{t&&this.modal.open($,Object(u.m)({isBlocking:!0},b.b)).result.then(t=>{t&&this.refreshList()},()=>{})},()=>{})}ngOnInit(){const t=this;this.visable=!0,this.listGroup$=new class extends f.i{constructor(){super(...arguments),this.prerequest$=Object(g.a)([t.listTrigger,t.cmdService.listCmd$.verify(this.cmd)]).pipe(Object(h.a)(([,t])=>t))}},this.listGroup$.deploy(),this.listGroup$.getOutput().subscribe(t=>{this.refreshing=!1,0===t[1].length&&(this.groups=t[0].groups)}),this.refreshing=!0,this.listTrigger.next(1),this.stats$=new class extends f.e{constructor(){super(...arguments),this.prerequest$=Object(g.a)([t.cmdService.rst$.getOutput(),t.statsTrigger,t.cmdService.listCmd$.verify(this.cmd)]).pipe(Object(m.a)(()=>t.visable),Object(h.a)(([,t,e])=>0!==e[1].length?[{},e[1]]:""===t?e:[Object.assign(Object.assign({},e[0]),{group:t}),[]]))}},this.stats$.deploy(),this.statsTrigger.next("")}refreshList(){this.listGroup$.clearCache(),this.refreshing=!0,this.listTrigger.next(1)}ngOnDestroy(){this.visable=!1}}return t.\u0275fac=function(e){return new(e||t)(y.Yb(C.a),y.Yb(b.a))},t.\u0275cmp=y.Sb({type:t,selectors:[["app-jobs"]],decls:28,vars:9,consts:[["tag","group",4,"showItBootstrap"],["OptionsMenu",""],[4,"hideItBootstrap"],[1,"container-flex"],[1,"row"],[1,"col-xl-6","col-lg-7","col-md-6","col-sm-5","col-sx-12"],["size","small"],[1,"speed-body"],[3,"stats$"],[1,"col-xl-6","col-lg-5","col-md-6","col-sm-7","col-sx-12"],["icon","more-vertical",3,"click",4,"hideItBootstrap"],[1,"col"],["tag","group"],["icon","trash-2-outline",3,"click"],["icon","sync",3,"ngClass","click"],[3,"ngClass","click"],["icon","more-vertical",3,"click"],[3,"ngClass","click",4,"ngFor","ngForOf"],["icon","trash-2-outline",2,"margin","auto auto auto 0",3,"click"],["placeholder","Groups",2,"max-width","calc(100% - 2em - 3rem)","width","calc(100% - 2em - 3rem)",3,"selected","selectedChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(y.ec(0,"nb-layout"),y.Sc(1,R,10,7,"nb-sidebar",0),y.Zb(2,"app-job-group-options-context-menu",null,1),y.ec(4,"nb-layout-column"),y.Sc(5,V,8,5,"nb-card",2),y.ec(6,"div",3),y.ec(7,"div",4),y.ec(8,"div",5),y.ec(9,"nb-card",6),y.ec(10,"nb-card-header"),y.Uc(11," Speed "),y.dc(),y.ec(12,"nb-card-body",7),y.Zb(13,"app-rng-speed-chart",8),y.dc(),y.dc(),y.dc(),y.ec(14,"div",9),y.ec(15,"nb-card"),y.ec(16,"nb-card-header"),y.Uc(17," Summary "),y.Sc(18,Y,1,0,"nb-icon",10),y.dc(),y.ec(19,"nb-card-body"),y.Zb(20,"app-rng-summary",8),y.dc(),y.dc(),y.dc(),y.dc(),y.ec(21,"div",4),y.ec(22,"div",11),y.ec(23,"nb-card"),y.ec(24,"nb-card-header"),y.Uc(25," Transferring "),y.dc(),y.ec(26,"nb-card-body"),y.Zb(27,"app-jobs-transferring",8),y.dc(),y.dc(),y.dc(),y.dc(),y.dc(),y.dc(),y.dc()),2&t&&(y.Mb(1),y.wc("showItBootstrap",y.zc(6,J)),y.Mb(4),y.wc("hideItBootstrap",y.zc(7,J)),y.Mb(8),y.wc("stats$",e.stats$),y.Mb(5),y.wc("hideItBootstrap",y.zc(8,J)),y.Mb(2),y.wc("stats$",e.stats$),y.Mb(7),y.wc("stats$",e.stats$))},directives:[s.F,a.e,G,s.E,a.a,s.o,s.r,s.n,P.a,U.a,z,s.X,s.z,n.l,s.J,s.K,n.n,s.V,s.O],styles:["nb-card-header[_ngcontent-%COMP%]{display:flex}nb-card-header[_ngcontent-%COMP%] > nb-icon[_ngcontent-%COMP%]{margin-left:auto;margin-top:auto;margin-bottom:auto;font-size:1.5rem;cursor:pointer}nb-sidebar[_ngcontent-%COMP%]{border-left:solid;border-color:#edf1f7;border-left-width:.0668rem}[_nghost-%COMP%]   nb-select[_ngcontent-%COMP%]     button{min-width:unset}[_nghost-%COMP%]     .scrollable{display:contents}ul[_ngcontent-%COMP%]{list-style-type:none}li[_ngcontent-%COMP%]{border-bottom:1px solid #edf1f7}div.row[_ngcontent-%COMP%]{padding-top:1rem}.active-group[_ngcontent-%COMP%]{background-color:rgba(89,139,255,.53);border-radius:.25rem}.speed-body[_ngcontent-%COMP%]{padding:0;min-height:10rem;overflow-y:hidden}nb-list-item[_ngcontent-%COMP%] > nb-icon[_ngcontent-%COMP%]{margin-left:auto}"]}),t})()}];let q=(()=>{class t{}return t.\u0275mod=y.Wb({type:t}),t.\u0275inj=y.Vb({factory:function(e){return new(e||t)},imports:[[l.g.forChild(A)],l.g]}),t})(),H=(()=>{class t{}return t.\u0275mod=y.Wb({type:t}),t.\u0275inj=y.Vb({factory:function(e){return new(e||t)},imports:[[n.c,a.b,q,s.I,s.Y,s.s,o.d,s.L,s.B,i.b,d.a,s.W,s.l,s.u,s.bb,r.b]]}),t})()}}]);