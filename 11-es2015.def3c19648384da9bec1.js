(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{A8Ph:function(t,e,c){"use strict";c.r(e),c.d(e,"JobsModule",(function(){return ct}));var n=c("ofXK"),s=c("aceb"),i=c("LPYB"),r=c("JU/d"),o=c("FTbq"),a=c("V2v1"),l=c("G3Ii"),u=c("tyNb"),d=c("U5lE"),h=c("x0Mr"),b=c("XNiG"),p=c("itXk"),g=c("lJxs"),f=c("GJmQ"),m=c("JYL7"),v=c("yCtX"),O=c("DH7j"),x=c("7o/Q"),y=c("l7GE"),C=c("ZUHj"),M=c("Lhse");class w{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new S(t,this.resultSelector))}}class S extends x.a{constructor(t,e,c=Object.create(null)){super(t),this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:null,this.values=c}_next(t){const e=this.iterators;Object(O.a)(t)?e.push(new j(t)):e.push("function"==typeof t[M.a]?new k(t[M.a]()):new $(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let c=0;c<e;c++){let e=t[c];e.stillUnsubscribed?this.destination.add(e.subscribe(e,c)):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,c=this.destination;for(let i=0;i<e;i++){let e=t[i];if("function"==typeof e.hasValue&&!e.hasValue())return}let n=!1;const s=[];for(let i=0;i<e;i++){let e=t[i],r=e.next();if(e.hasCompleted()&&(n=!0),r.done)return void c.complete();s.push(r.value)}this.resultSelector?this._tryresultSelector(s):c.next(s),n&&c.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(c){return void this.destination.error(c)}this.destination.next(e)}}class k{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return t&&t.done}}class j{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[M.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class $ extends y.a{constructor(t,e,c){super(t),this.parent=e,this.observable=c,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[M.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t,e,c,n,s){this.buffer.push(e),this.parent.checkIterators()}subscribe(t,e){return Object(C.a)(this,this.observable,this,e)}}var G=c("LRne"),P=c("zp1y"),U=c("eIep"),_=c("bOdf"),I=c("3E0/"),K=c("fXoL"),R=c("L7Zs");function T(t,e){if(1&t){const t=K.fc();K.ec(0,"nb-list-item",4),K.mc("click",(function(c){K.Kc(t);const n=e.index,s=K.oc();return s.check[n]=!s.check[n],c.preventDefault()})),K.ec(1,"nb-checkbox",5),K.mc("checkedChange",(function(c){K.Kc(t);const n=e.index;return K.oc().check[n]=c})),K.dc(),K.ec(2,"label"),K.Uc(3),K.dc(),K.dc()}if(2&t){const t=e.$implicit,c=e.index,n=K.oc();K.Mb(1),K.wc("checked",n.check[c]),K.Mb(2),K.Vc(t)}}let V=(()=>{class t{constructor(t,e){this.dialog=t,this.cmdService=e,this.finishedGroup=[],this.check=[],this.loading=!1,this.deleteTrigger=new b.a,this.context=t.context}confirm(){this.deleteTrigger.next(this.finishedGroup.filter((t,e)=>this.check[e])),this.dialog.close()}ngOnInit(){const t=this,e=new b.a,c=new class extends m.j{constructor(){super(...arguments),this.prerequest$=e.pipe(Object(P.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(g.a)(t=>t[1]))}};c.deploy();const n=new class extends m.e{constructor(){super(...arguments),this.prerequest$=e.pipe(Object(P.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(g.a)(t=>t[1]))}};n.deploy(),this.loading=!0,c.clearCache(),n.clearCache(),function(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(v.a)(t,void 0).lift(new w(e))}(c.getOutput(),n.getOutput()).subscribe(([t,e])=>{if(this.loading=!1,0!==t[1].length||0!==e[1].length)return;const c=e[0]["core-stats"].transferring;this.finishedGroup=c?t[0].groups.filter(t=>!c.some(e=>t===e.group)):t[0].groups,this.check=this.finishedGroup.map(()=>!0)}),e.next(),this.deleteStates$=new class extends m.d{constructor(){super(...arguments),this.prerequest$=t.deleteTrigger.pipe(Object(P.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(U.a)(([t,e])=>0!==e[1].length?Object(G.a)([{},e[1]]):Object(G.a)(...t.map(t=>[Object.assign(Object.assign({},e[0]),{group:t}),[]]))),Object(_.a)(t=>Object(G.a)(t).pipe(Object(I.a)(1e3))))}},this.deleteStates$.deploy(),this.deleteStates$.getOutput().subscribe()}}return t.\u0275fac=function(e){return new(e||t)(K.Yb(d.d),K.Yb(R.a))},t.\u0275cmp=K.Sb({type:t,selectors:[["ng-component"]],decls:11,vars:2,consts:[["spinnerMessage","Loading...",3,"nbSpinner"],[3,"click",4,"ngFor","ngForOf"],["nbButton","","status","danger",3,"click"],["nbButton","","status","success",1,"push-to-right",3,"click"],[3,"click"],[3,"checked","checkedChange"]],template:function(t,e){1&t&&(K.ec(0,"nb-card"),K.ec(1,"nb-card-header"),K.Uc(2," Select groups to be deleted "),K.dc(),K.ec(3,"nb-card-body",0),K.ec(4,"nb-list"),K.Sc(5,T,4,2,"nb-list-item",1),K.dc(),K.dc(),K.ec(6,"nb-card-footer"),K.ec(7,"button",2),K.mc("click",(function(){return e.dialog.dismiss()})),K.Uc(8,"Close"),K.dc(),K.ec(9,"button",3),K.mc("click",(function(){return e.confirm()})),K.Uc(10," Confirm "),K.dc(),K.dc(),K.dc()),2&t&&(K.Mb(3),K.wc("nbSpinner",e.loading),K.Mb(2),K.wc("ngForOf",e.finishedGroup))},directives:[s.o,s.r,s.n,s.ab,s.J,n.n,s.p,s.k,s.K,s.t],styles:["nb-card[_ngcontent-%COMP%] {\n\t\t\t\tmargin: calc(-1em - 5px);\n\t\t\t}\n\t\t\tnb-card-header[_ngcontent-%COMP%], nb-card-footer[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\tlabel[_ngcontent-%COMP%] {\n\t\t\t\tpadding-left: 0.75rem;\n\t\t\t}\n\t\t\t.push-to-right[_ngcontent-%COMP%] {\n\t\t\t\tmargin-left: auto;\n\t\t\t}"]}),t})();function z(t,e){1&t&&(K.Zb(0,"nb-icon",2),K.Uc(1," Reset stats "))}let B=(()=>{class t{constructor(t,e,c){this.contextMenuService=t,this.cmdService=e,this.toastrService=c,this.resetTrigger=new b.a}onContextMenu(t,e){this.contextMenuService.show.next({contextMenu:this.contextMenu,event:t,item:e}),t.preventDefault(),t.stopPropagation()}resetStats(t){this.resetTrigger.next(t)}ngOnInit(){const t=this;this.resetStats$=new class extends m.f{constructor(){super(...arguments),this.prerequest$=t.resetTrigger.pipe(Object(P.a)(t.cmdService.listCmd$.verify(this.cmd)),Object(g.a)(([t,e])=>0!==e[1].length?[{},e[1]]:t&&""!==t?[Object.assign(Object.assign({},e[0]),{group:t}),[]]:e))}},this.resetStats$.deploy(),this.resetStats$.getSupersetOutput().subscribe(t=>{let e=t[0]&&t[0].group;e||(e="[All]"),0===t[1].length?this.toastrService.success(`${e}`,"Reset stats success"):this.toastrService.danger(`${e}`,"Reset stats failure")})}}return t.\u0275fac=function(e){return new(e||t)(K.Yb(r.c),K.Yb(R.a),K.Yb(s.mb))},t.\u0275cmp=K.Sb({type:t,selectors:[["app-job-group-options-context-menu"]],inputs:{contextMenu:"contextMenu"},decls:3,vars:0,consts:[["OptionMenu",""],["contextMenuItem","",3,"execute"],["icon","refresh"]],template:function(t,e){1&t&&(K.ec(0,"context-menu",null,0),K.Sc(2,z,2,0,"ng-template",1),K.mc("execute",(function(t){return e.resetStats(t.item)})),K.dc())},directives:[r.a,r.d,s.z],encapsulation:2}),t})();var L=c("gVoi"),F=c("3RaO"),Y=c("HRdY"),H=c("QKBS");function J(t,e){if(1&t&&(K.ec(0,"td"),K.Uc(1),K.dc(),K.ec(2,"td"),K.Uc(3),K.dc(),K.ec(4,"td"),K.Uc(5),K.dc(),K.ec(6,"td"),K.Uc(7),K.dc(),K.ec(8,"td"),K.Uc(9),K.dc()),2&t){const t=e.$implicit;K.Mb(1),K.Vc(t.name),K.Mb(2),K.Vc(t.sizeHumanReadable),K.Mb(2),K.Vc(t.percentage),K.Mb(2),K.Vc(t.speedHumanReadable),K.Mb(2),K.Vc(t.etaHumanReadable)}}let A=(()=>{class t{constructor(){this.columns=[{key:"name",title:"Name"},{key:"size",title:"Size"},{key:"percentage",title:"Percentage"},{key:"speed",title:"Speed"},{key:"eta",title:"eta"}],this.data=[]}ngOnInit(){this.stats$.getOutput().subscribe(([t,e])=>{0===e.length&&(this.data=t["core-stats"].transferring||[],this.data.forEach(t=>{t.sizeHumanReadable=Object(Y.a)(t.size,3),t.speedHumanReadable=Object(Y.a)(t.speed)+"/s",t.etaHumanReadable="number"==typeof t.eta?H.a.humanize(1e3*t.eta,{largest:3}):"-"}))}),this.configuration=Object.assign({},o.c),this.configuration.searchEnabled=!0,this.configuration.isLoading=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=K.Sb({type:t,selectors:[["app-jobs-transferring"]],inputs:{stats$:"stats$"},decls:2,vars:3,consts:[[3,"configuration","data","columns"]],template:function(t,e){1&t&&(K.ec(0,"ngx-table",0),K.Sc(1,J,10,5,"ng-template"),K.dc()),2&t&&K.wc("configuration",e.configuration)("data",e.data)("columns",e.columns)},directives:[o.b],encapsulation:2}),t})();const q=function(t){return{"active-group":t}};function Z(t,e){if(1&t){const t=K.fc();K.ec(0,"nb-list-item",15),K.mc("click",(function(){K.Kc(t);const c=e.$implicit;return K.oc(2).activateGroup(c)})),K.Uc(1),K.ec(2,"nb-icon",16),K.mc("click",(function(c){K.Kc(t);const n=e.$implicit;return K.oc(2),K.Gc(3).onContextMenu(c,n)})),K.dc(),K.dc()}if(2&t){const t=e.$implicit,c=K.oc(2);K.wc("ngClass",K.Ac(2,q,c.activeGroup===t)),K.Mb(1),K.Wc(" ",t," ")}}const E=function(t){return{"infinte-rotate":t}};function X(t,e){if(1&t){const t=K.fc();K.ec(0,"nb-sidebar",12),K.ec(1,"nb-card-header"),K.Uc(2," Groups "),K.ec(3,"nb-icon",13),K.mc("click",(function(){return K.Kc(t),K.oc().clearGroups()})),K.dc(),K.ec(4,"nb-icon",14),K.mc("click",(function(){return K.Kc(t),K.oc().refreshList()})),K.dc(),K.dc(),K.ec(5,"nb-list"),K.ec(6,"nb-list-item",15),K.mc("click",(function(){return K.Kc(t),K.oc().activateGroup("")})),K.Uc(7," [All] "),K.ec(8,"nb-icon",16),K.mc("click",(function(e){return K.Kc(t),K.oc(),K.Gc(3).onContextMenu(e,"")})),K.dc(),K.dc(),K.Sc(9,Z,3,4,"nb-list-item",17),K.dc(),K.dc()}if(2&t){const t=K.oc();K.Mb(4),K.wc("ngClass",K.Ac(3,E,t.refreshing)),K.Mb(2),K.wc("ngClass",K.Ac(5,q,""===t.activeGroup)),K.Mb(3),K.wc("ngForOf",t.groups)}}function N(t,e){if(1&t&&(K.ec(0,"nb-option",22),K.Uc(1),K.dc()),2&t){const t=e.$implicit;K.wc("value",t),K.Mb(1),K.Wc(" ",t,"")}}function W(t,e){if(1&t){const t=K.fc();K.ec(0,"nb-card"),K.ec(1,"nb-card-header"),K.ec(2,"nb-icon",18),K.mc("click",(function(){return K.Kc(t),K.oc().clearGroups()})),K.dc(),K.ec(3,"nb-select",19),K.mc("selectedChange",(function(e){return K.Kc(t),K.oc().activeGroup=e}))("selectedChange",(function(){K.Kc(t);const e=K.oc();return e.activateGroup(e.activeGroup)})),K.ec(4,"nb-option",20),K.Uc(5,"[All]"),K.dc(),K.Sc(6,N,2,2,"nb-option",21),K.dc(),K.ec(7,"nb-icon",14),K.mc("click",(function(){return K.Kc(t),K.oc().refreshList()})),K.dc(),K.dc(),K.dc()}if(2&t){const t=K.oc();K.Mb(3),K.wc("selected",t.activeGroup),K.Mb(3),K.wc("ngForOf",t.groups),K.Mb(1),K.wc("ngClass",K.Ac(3,E,t.refreshing))}}function D(t,e){if(1&t){const t=K.fc();K.ec(0,"nb-icon",16),K.mc("click",(function(e){K.Kc(t);const c=K.oc();return K.Gc(3).onContextMenu(e,c.activeGroup)})),K.dc()}}const Q=function(){return["xl","lg","md"]},tt=[{path:"",component:(()=>{class t{constructor(t,e){this.cmdService=t,this.modal=e,this.activeGroup="",this.groups=[],this.listTrigger=new b.a,this.statsTrigger=new b.a,this.visable=!1,this.refreshing=!1}activateGroup(t){this.activeGroup=t,this.statsTrigger.next(t)}clearGroups(){this.modal.confirm().className("flat-attack").message("Cleaning finished groups?").isBlocking(!0).open().result.then(t=>{t&&this.modal.open(V,Object(d.m)({isBlocking:!0},h.b)).result.then(t=>{t&&this.refreshList()},()=>{})},()=>{})}ngOnInit(){const t=this;this.visable=!0,this.listGroup$=new class extends m.j{constructor(){super(...arguments),this.prerequest$=Object(p.a)([t.listTrigger,t.cmdService.listCmd$.verify(this.cmd)]).pipe(Object(g.a)(([,t])=>t))}},this.listGroup$.deploy(),this.listGroup$.getOutput().subscribe(t=>{this.refreshing=!1,0===t[1].length&&(this.groups=t[0].groups)}),this.refreshing=!0,this.listTrigger.next(1),this.stats$=new class extends m.e{constructor(){super(...arguments),this.prerequest$=Object(p.a)([t.cmdService.rst$.getOutput(),t.statsTrigger,t.cmdService.listCmd$.verify(this.cmd)]).pipe(Object(f.a)(()=>t.visable),Object(g.a)(([,t,e])=>0!==e[1].length?[{},e[1]]:""===t?e:[Object.assign(Object.assign({},e[0]),{group:t}),[]]))}},this.stats$.deploy(),this.statsTrigger.next("")}refreshList(){this.listGroup$.clearCache(),this.refreshing=!0,this.listTrigger.next(1)}ngOnDestroy(){this.visable=!1}}return t.\u0275fac=function(e){return new(e||t)(K.Yb(R.a),K.Yb(h.a))},t.\u0275cmp=K.Sb({type:t,selectors:[["app-jobs"]],decls:28,vars:9,consts:[["tag","group",4,"showItBootstrap"],["OptionsMenu",""],[4,"hideItBootstrap"],[1,"container-flex"],[1,"row"],[1,"col-xl-6","col-lg-7","col-md-6","col-sm-5","col-sx-12"],["size","small"],[1,"speed-body"],[3,"stats$"],[1,"col-xl-6","col-lg-5","col-md-6","col-sm-7","col-sx-12"],["icon","more-vertical",3,"click",4,"hideItBootstrap"],[1,"col"],["tag","group"],["icon","trash-2-outline",3,"click"],["icon","sync",3,"ngClass","click"],[3,"ngClass","click"],["icon","more-vertical",3,"click"],[3,"ngClass","click",4,"ngFor","ngForOf"],["icon","trash-2-outline",2,"margin","auto auto auto 0",3,"click"],["placeholder","Groups",2,"max-width","calc(100% - 2em - 3rem)","width","calc(100% - 2em - 3rem)",3,"selected","selectedChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(K.ec(0,"nb-layout"),K.Sc(1,X,10,7,"nb-sidebar",0),K.Zb(2,"app-job-group-options-context-menu",null,1),K.ec(4,"nb-layout-column"),K.Sc(5,W,8,5,"nb-card",2),K.ec(6,"div",3),K.ec(7,"div",4),K.ec(8,"div",5),K.ec(9,"nb-card",6),K.ec(10,"nb-card-header"),K.Uc(11," Speed "),K.dc(),K.ec(12,"nb-card-body",7),K.Zb(13,"app-rng-speed-chart",8),K.dc(),K.dc(),K.dc(),K.ec(14,"div",9),K.ec(15,"nb-card"),K.ec(16,"nb-card-header"),K.Uc(17," Summary "),K.Sc(18,D,1,0,"nb-icon",10),K.dc(),K.ec(19,"nb-card-body"),K.Zb(20,"app-rng-summary",8),K.dc(),K.dc(),K.dc(),K.dc(),K.ec(21,"div",4),K.ec(22,"div",11),K.ec(23,"nb-card"),K.ec(24,"nb-card-header"),K.Uc(25," Transferring "),K.dc(),K.ec(26,"nb-card-body"),K.Zb(27,"app-jobs-transferring",8),K.dc(),K.dc(),K.dc(),K.dc(),K.dc(),K.dc(),K.dc()),2&t&&(K.Mb(1),K.wc("showItBootstrap",K.zc(6,Q)),K.Mb(4),K.wc("hideItBootstrap",K.zc(7,Q)),K.Mb(8),K.wc("stats$",e.stats$),K.Mb(5),K.wc("hideItBootstrap",K.zc(8,Q)),K.Mb(2),K.wc("stats$",e.stats$),K.Mb(7),K.wc("stats$",e.stats$))},directives:[s.F,a.e,B,s.E,a.a,s.o,s.r,s.n,L.a,F.a,A,s.X,s.z,n.l,s.J,s.K,n.n,s.V,s.O],styles:["nb-card-header[_ngcontent-%COMP%]{display:flex}nb-card-header[_ngcontent-%COMP%] > nb-icon[_ngcontent-%COMP%]{margin-left:auto;margin-top:auto;margin-bottom:auto;font-size:1.5rem;cursor:pointer}nb-sidebar[_ngcontent-%COMP%]{border-left:solid;border-color:#edf1f7;border-left-width:.0668rem}[_nghost-%COMP%]   nb-select[_ngcontent-%COMP%]     button{min-width:unset}[_nghost-%COMP%]     .scrollable{display:contents}ul[_ngcontent-%COMP%]{list-style-type:none}li[_ngcontent-%COMP%]{border-bottom:1px solid #edf1f7}div.row[_ngcontent-%COMP%]{padding-top:1rem}.active-group[_ngcontent-%COMP%]{background-color:rgba(89,139,255,.53);border-radius:.25rem}.speed-body[_ngcontent-%COMP%]{padding:0;min-height:10rem;overflow-y:hidden}nb-list-item[_ngcontent-%COMP%] > nb-icon[_ngcontent-%COMP%]{margin-left:auto}"]}),t})()}];let et=(()=>{class t{}return t.\u0275mod=K.Wb({type:t}),t.\u0275inj=K.Vb({factory:function(e){return new(e||t)},imports:[[u.g.forChild(tt)],u.g]}),t})(),ct=(()=>{class t{}return t.\u0275mod=K.Wb({type:t}),t.\u0275inj=K.Vb({factory:function(e){return new(e||t)},imports:[[n.c,a.b,et,s.I,s.Y,s.s,o.d,s.L,s.B,i.b,l.a,s.W,s.l,s.u,s.bb,r.b]]}),t})()}}]);