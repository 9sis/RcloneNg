(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{yPrK:function(t,e,n){"use strict";n.r(e),n.d(e,"SettingsModule",(function(){return I}));var i=n("ofXK"),o=n("aceb"),s=n("fXoL"),r=n("3Pt+"),c=n("xgIS");const a=["editorContainer"];let d,u=!1,h=(()=>{class t{constructor(t){this.config=t,this.onInit=new s.r}ngAfterViewInit(){u?d.then(()=>{this.initMonaco(this._options)}):(u=!0,d=new Promise(t=>{const e=this.config.baseUrl||"./assets";if("object"==typeof window.monaco)return void t();const n=()=>{window.require.config({paths:{vs:`${e}/monaco/vs`}}),window.require(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options),t()})};if(window.require)n();else{const t=document.createElement("script");t.type="text/javascript",t.src=`${e}/monaco/vs/loader.js`,t.addEventListener("load",n),document.body.appendChild(t)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return t.\u0275fac=function(t){s.lc()},t.\u0275dir=s.Tb({type:t,viewQuery:function(t,e){var n;1&t&&s.Qc(a,!0),2&t&&s.Fc(n=s.nc())&&(e._editorContainer=n.first)},outputs:{onInit:"onInit"}}),t})();const p=new s.u("NGX_MONACO_EDITOR_CONFIG");var l;let g=(()=>{let t=l=class extends h{constructor(t,e){super(e),this.zone=t,this.editorConfig=e,this._value="",this.propagateChange=t=>{},this.onTouched=()=>{}}set options(t){this._options=Object.assign({},this.config.defaultOptions,t),this._editor&&(this._editor.dispose(),this.initMonaco(t))}get options(){return this._options}set model(t){this.options.model=t,this._editor&&(this._editor.dispose(),this.initMonaco(this.options))}writeValue(t){this._value=t||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){this.onTouched=t}initMonaco(t){const e=!!t.model;if(e){const e=monaco.editor.getModel(t.model.uri||"");e?(t.model=e,t.model.setValue(this._value)):t.model=monaco.editor.createModel(t.model.value,t.model.language,t.model.uri)}this._editor=monaco.editor.create(this._editorContainer.nativeElement,t),e||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(t=>{const e=this._editor.getValue();this.zone.run(()=>{this.propagateChange(e),this._value=e})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=Object(c.a)(window,"resize").subscribe(()=>this._editor.layout()),this.onInit.emit(this._editor)}};return t.\u0275fac=function(e){return new(e||t)(s.Yb(s.F),s.Yb(p))},t.\u0275cmp=s.Sb({type:t,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",model:"model"},features:[s.Lb([{provide:r.f,useExisting:Object(s.db)(()=>l),multi:!0}]),s.Jb],decls:2,vars:0,consts:[[1,"editor-container"],["editorContainer",""]],template:function(t,e){1&t&&s.Zb(0,"div",0,1)},styles:["[_nghost-%COMP%] {\n      display: block;\n      height: 200px;\n    }\n\n    .editor-container[_ngcontent-%COMP%] {\n      width: 100%;\n      height: 98%;\n    }"]}),t})();var b;let m=(()=>{let t=b=class{static forRoot(t={}){return{ngModule:b,providers:[{provide:p,useValue:t}]}}};return t.\u0275mod=s.Wb({type:t}),t.\u0275inj=s.Vb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})();var f=n("tyNb");let v=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Sb({type:t,selectors:[["app-settings"]],decls:1,vars:0,template:function(t,e){1&t&&s.Zb(0,"router-outlet")},directives:[f.h],encapsulation:2}),t})();var w=n("XNiG"),O=n("itXk"),_=n("lJxs"),y=n("zp1y"),C=n("JYL7"),M=n("L7Zs");let S=(()=>{class t{constructor(t){this.cmdService=t,this.getTrigger=new w.a,this.setTrigger=new w.a;const e=this;this.options$=new class extends C.q{constructor(){super(...arguments),this.prerequest$=Object(O.a)([e.getTrigger,e.cmdService.listCmd$.verify(this.cmd)]).pipe(Object(_.a)(([,t])=>t))}},this.options$.deploy(),this.getTrigger.next(1),this.optionsSet$=new class extends C.r{constructor(){super(...arguments),this.prerequest$=e.setTrigger.pipe(Object(y.a)(e.cmdService.listCmd$.verify(this.cmd)),Object(_.a)(([t,e])=>[Object.assign(Object.assign({},e[0]),{options:t}),e[1]]))}},this.optionsSet$.deploy(),this.optionsSet$.getOutput().subscribe(t=>{this.getTrigger.next(1)})}setOption(t){this.setTrigger.next(t)}}return t.\u0275fac=function(e){return new(e||t)(s.ic(M.a))},t.\u0275prov=s.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var T=n("V2v1");const j=[{path:"",component:v,children:[{path:"server",component:(()=>{class t{constructor(t,e){this.service=t,this.rsp=e,this.editorOptions={theme:"vs",language:"json",wordWrap:"on",wordWrapMinified:!0,wrappingIndent:"indent"},this.editorModel={value:"",language:"json"},this.connector=[],this.saveTrigger=new w.a,this.recoverTrigger=new w.a}save(){this.saveTrigger.next(1)}recover(){this.recoverTrigger.next(1)}editorOnInit(t){function e(e){t.setValue(JSON.stringify(e,null,4)),t.trigger("","editor.action.formatDocument",{})}this.connector.forEach(t=>t.unsubscribe()),this.connector=[],this.connector.push(this.service.options$.getOutput().subscribe(t=>{0===t[1].length&&(this.originOptions=t[0].options,e(t[0].options))}),this.rsp.getResponsiveSize.subscribe(e=>{t.updateOptions({minimap:{enabled:"xs"!==e}})}),this.saveTrigger.subscribe(()=>{const e=function t(e,n){const i={};for(const o in n)if(n.hasOwnProperty(o))if(e.hasOwnProperty(o))if("object"==typeof e[o]){const s=t(e[o],n[o]);Object.keys(s).length&&(i[o]=s)}else e[o]!==n[o]&&(i[o]=n[o]);else i[o]=n[o];return i}(this.originOptions,JSON.parse(t.getValue()));this.service.setOption(e)}),this.recoverTrigger.subscribe(()=>{e(this.originOptions)}))}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(S),s.Yb(T.c))},t.\u0275cmp=s.Sb({type:t,selectors:[["app-rng-sever-setting"]],viewQuery:function(t,e){var n;1&t&&s.Qc(g,!0),2&t&&s.Fc(n=s.nc())&&(e.editorComponent=n.first)},decls:9,vars:2,consts:[["nbButton","","size","small","status","success",1,"push-to-right",3,"click"],["nbButton","","size","small","status","danger",3,"click"],[3,"options","model","onInit"]],template:function(t,e){1&t&&(s.ec(0,"nb-card"),s.ec(1,"nb-card-header"),s.Uc(2," Server Conf "),s.ec(3,"button",0),s.mc("click",(function(){return e.save()})),s.Uc(4," Save "),s.dc(),s.ec(5,"button",1),s.mc("click",(function(){return e.recover()})),s.Uc(6,"Recover"),s.dc(),s.dc(),s.ec(7,"nb-card-body"),s.ec(8,"ngx-monaco-editor",2),s.mc("onInit",(function(t){return e.editorOnInit(t)})),s.dc(),s.dc(),s.dc()),2&t&&(s.Mb(8),s.wc("options",e.editorOptions)("model",e.editorModel))},directives:[o.o,o.r,o.k,o.n,g],styles:["nb-card[_ngcontent-%COMP%] {\n\t\t\t\tmargin: 0;\n\t\t\t}\n\t\t\tnb-card-header[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\tbutton[_ngcontent-%COMP%] {\n\t\t\t\tmargin: 0 0.5rem;\n\t\t\t}\n\t\t\t.push-to-right[_ngcontent-%COMP%] {\n\t\t\t\tmargin-left: auto;\n\t\t\t}\n\t\t\tnb-card-body[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0;\n\t\t\t\toverflow-y: hidden;\n\t\t\t}\n\t\t\t[_nghost-%COMP%]   ngx-monaco-editor[_ngcontent-%COMP%] {\n\t\t\t\theight: calc(100vh - 4.75rem - 4.25rem - 0.15rem);\n\t\t\t}\n\t\t\t[_nghost-%COMP%]   ngx-monaco-editor[_ngcontent-%COMP%]     .editor-container {\n\t\t\t\theight: 100%;\n\t\t\t}"]}),t})()},{path:"",redirectTo:"server",pathMatch:"full"}]}];let x=(()=>{class t{}return t.\u0275mod=s.Wb({type:t}),t.\u0275inj=s.Vb({factory:function(e){return new(e||t)},imports:[[f.g.forChild(j)],f.g]}),t})(),I=(()=>{class t{}return t.\u0275mod=s.Wb({type:t}),t.\u0275inj=s.Vb({factory:function(e){return new(e||t)},imports:[[i.c,x,m.forRoot(),o.s,o.l,o.H]]}),t})()}}]);