function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,c=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(s){c=!0,r=s}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);if(e){var c=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"8Zbc":function(t,e,n){"use strict";n.r(e),n.d(e,"ManagerModule",(function(){return Oe}));var i=n("ofXK"),c=n("3Pt+"),r=n("aceb"),o=n("LPYB"),a=n("FTbq"),s=n("fXoL"),l=n("Iab2");n("tk/3");var u,d,p=((d=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"genType",value:function(t){if(!t||-1===t.lastIndexOf("."))return"text/plain";var e=t.substr(t.lastIndexOf(".")+1);switch(e){case"txt":return"text/plain";case"xml":case"html":return"text/".concat(e);case"json":return"octet/stream";default:return"application/".concat(e)}}},{key:"save",value:function(t,e,n,i){if(!t)throw new Error("Data argument should be a blob instance");var c=new Blob([t],{type:n||t.type||this.genType(e)});Object(l.saveAs)(c,decodeURI(e||"download"),i)}},{key:"saveText",value:function(t,e,n){var i=new Blob([t]);this.save(i,e,null,n)}},{key:"isFileSaverSupported",get:function(){try{return!!new Blob}catch(t){return!1}}}]),t}()).\u0275fac=function(t){return new(t||d)},d.\u0275prov=Object(s.Ub)({factory:function(){return new d},token:d,providedIn:"root"}),d),h=((u=function t(){_classCallCheck(this,t)}).\u0275mod=s.Wb({type:u}),u.\u0275inj=s.Vb({factory:function(t){return new(t||u)}}),u),f=n("V2v1"),b=n("G3Ii"),m=n("tyNb"),g=n("U5lE"),v=n("x0Mr"),y=n("XNiG"),w=n("/uUt"),k=n("lJxs"),C=n("zp1y"),_=n("GJmQ"),O=n("/ciQ"),M=n("JYL7"),S=n("7o/Q");function I(t){return function(e){return e.lift(new D(t))}}var j,D=function(){function t(e){_classCallCheck(this,t),this.value=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new x(t,this.value))}}]),t}(),x=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var c;return _classCallCheck(this,n),(c=e.call(this,t)).value=i,c}return _createClass(n,[{key:"_next",value:function(t){this.destination.next(this.value)}}]),n}(S.a),T=((j=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;_classCallCheck(this,n),(t=e.call(this)).trigger=new y.a;var i=_assertThisInitialized(t);return t.clipboard$=new(function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments)).prerequest$=i.trigger.pipe(I([{clipboard:i},[]])),t}return n}(O.b)),t.clipboard$.deploy(),t.clipboard$.getOutput().subscribe(),t.trigger.next(1),t}return _createClass(n,[{key:"commit",value:function(){this.trigger.next(1)}}]),n}(O.a)).\u0275fac=function(t){return new(t||j)},j.\u0275prov=s.Ub({token:j,factory:j.\u0275fac,providedIn:"root"}),j),$=["remotesTable"];function P(t,e){if(1&t&&(s.ec(0,"td"),s.Uc(1),s.dc(),s.ec(2,"td"),s.Uc(3),s.dc(),s.ec(4,"td"),s.ec(5,"button",2),s.Uc(6,"Detail"),s.dc(),s.dc()),2&t){var n=e.$implicit;s.Mb(1),s.Vc(n.srcRemote),s.Mb(2),s.Vc(n.srcItem.Path)}}var A,F=((A=function(){function t(e){_classCallCheck(this,t),this.service=e,this.columns=[{key:"srcRemote",title:"Remote",width:"10%"},{key:"srcItem.Path",title:"Path",width:"80%"},{key:"",title:"Action",width:"10%"}],this.data=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.service.clipboard$.getOutput().subscribe((function(e){0===e[1].length&&(t.data=e[0].clipboard.values.filter((function(e){return e.oper===t.oper})))})),this.configuration=Object.assign({},a.c),this.configuration.detailsTemplate=!0,this.configuration.tableLayout.hover=!0}},{key:"toggleDatail",value:function(t,e){t.preventDefault(),this.table.apiEvent({type:a.a.toggleRowIndex,value:e})}}]),t}()).\u0275fac=function(t){return new(t||A)(s.Yb(T))},A.\u0275cmp=s.Sb({type:A,selectors:[["app-clipboard-remotes-table"]],viewQuery:function(t,e){var n;1&t&&s.Zc($,!0),2&t&&s.Fc(n=s.nc())&&(e.table=n.first)},inputs:{oper:"oper"},decls:3,vars:4,consts:[[3,"configuration","data","id","columns"],["remotesTable",""],["nbButton",""]],template:function(t,e){1&t&&(s.ec(0,"ngx-table",0,1),s.Sc(2,P,7,2,"ng-template"),s.dc()),2&t&&s.wc("configuration",e.configuration)("data",e.data)("id","remotes-tab-"+e.oper)("columns",e.columns)},directives:[a.b,r.k],encapsulation:2}),A);function E(t,e){if(1&t){var n=s.fc();s.cc(0),s.ec(1,"div",7),s.ec(2,"button",8),s.mc("click",(function(){return s.Kc(n),s.oc(2).dialog.close(!0)})),s.Zb(3,"nb-icon",9),s.Uc(4," Confirm "),s.dc(),s.dc(),s.bc()}}function V(t,e){if(1&t&&(s.ec(0,"nb-tab",4),s.Sc(1,E,5,0,"ng-container",5),s.Zb(2,"app-clipboard-remotes-table",6),s.dc()),2&t){var n=e.$implicit;s.wc("tabTitle",n.title)("tabIcon",n.icon)("badgeText",n.len),s.Mb(1),s.wc("ngIf","del"===n.oper),s.Mb(1),s.wc("oper",n.oper)}}var R,U,N,Z=((U=function(){function t(e,n){_classCallCheck(this,t),this.service=e,this.dialog=n,this.data=[{oper:"copy",title:"Copy",icon:"copy",len:0},{oper:"move",title:"Move",icon:"move",len:0},{oper:"del",title:"Delete",icon:"trash-2",len:0}],this.context=n.context}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.service.clipboard$.getOutput().subscribe((function(e){0===e[1].length&&t.data.forEach((function(t){return t.len=e[0].clipboard.countManipulation(t.oper)}))}))}}]),t}()).\u0275fac=function(t){return new(t||U)(s.Yb(T),s.Yb(g.d))},U.\u0275cmp=s.Sb({type:U,selectors:[["app-manager-clipboard-dialog"]],decls:8,vars:1,consts:[[1,"dialog-card"],["icon","shopping-bag",1,"clipboard-icon"],["fullWidth",""],["badgeStatus","primary",3,"tabTitle","tabIcon","badgeText",4,"ngFor","ngForOf"],["badgeStatus","primary",3,"tabTitle","tabIcon","badgeText"],[4,"ngIf"],[3,"oper"],[2,"display","flex","justify-content","center"],["nbButton","","status","danger",3,"click"],["icon","alert-triangle"]],template:function(t,e){1&t&&(s.ec(0,"nb-card",0),s.ec(1,"nb-card-header"),s.ec(2,"nb-action"),s.Zb(3,"nb-icon",1),s.dc(),s.Uc(4," Clipboard "),s.dc(),s.ec(5,"nb-card-body"),s.ec(6,"nb-tabset",2),s.Sc(7,V,3,5,"nb-tab",3),s.dc(),s.dc(),s.dc()),2&t&&(s.Mb(7),s.wc("ngForOf",e.data))},directives:[r.o,r.r,r.f,r.z,r.n,r.ib,i.n,r.hb,i.o,F,r.k],styles:["nb-card-footer[_ngcontent-%COMP%], nb-card-header[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\t.dialog-card[_ngcontent-%COMP%] {\n\t\t\t\tmargin: calc(-1em - 3px);\n\t\t\t}\n\t\t\t[_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0;\n\t\t\t}\n\t\t\t.clipboard-icon[_ngcontent-%COMP%] {\n\t\t\t\tfont-size: 1.5rem;\n\t\t\t\tmargin-right: 0.5rem;\n\t\t\t}"]}),U),z=((R=function t(e){_classCallCheck(this,t),this.dialog=e,this.context=e.context}).\u0275fac=function(t){return new(t||R)(s.Yb(g.d))},R.\u0275cmp=s.Sb({type:R,selectors:[["ng-component"]],decls:12,vars:0,consts:[["icon","info-outline","nbTooltip","support recursively create. (eg: a/b/c)",1,"push-to-right",2,"font-size","1.5rem"],["nbInput","","fullWidth",""],["newDir",""],["nbButton","","status","danger",3,"click"],["nbButton","","status","success",1,"push-to-right",3,"click"]],template:function(t,e){if(1&t){var n=s.fc();s.ec(0,"nb-card"),s.ec(1,"nb-card-header"),s.Uc(2," Create Directory "),s.Zb(3,"nb-icon",0),s.dc(),s.ec(4,"nb-card-body"),s.Zb(5,"input",1,2),s.dc(),s.ec(7,"nb-card-footer"),s.ec(8,"button",3),s.mc("click",(function(){return e.dialog.dismiss()})),s.Uc(9,"Close"),s.dc(),s.ec(10,"button",4),s.mc("click",(function(){s.Kc(n);var t=s.Gc(6);return e.dialog.close(t.value)})),s.Uc(11," Confirm "),s.dc(),s.dc(),s.dc()}},directives:[r.o,r.r,r.z,r.nb,r.n,r.C,r.p,r.k],styles:["nb-card[_ngcontent-%COMP%] {\n\t\t\t\tmargin: calc(-1em - 5px);\n\t\t\t}\n\t\t\tnb-card-header[_ngcontent-%COMP%], nb-card-footer[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\t.push-to-right[_ngcontent-%COMP%] {\n\t\t\t\tmargin-left: auto;\n\t\t\t}"]}),R),K=n("itXk"),B=n("NzlE"),L=n("L7Zs"),Y=n("Jmhc"),q=((N=function(){function t(e,n,i,c){var r=this;_classCallCheck(this,t),this.cmdService=e,this.toastr=n,this.fileSaverService=i,this.serverSettingService=c,this.trigger=new y.a;var o=this;this.download$=new(function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments)).prerequest$=o.trigger.pipe(Object(C.a)(o.cmdService.connection$.getOutput(),o.serverSettingService.options$.getOutput()),Object(k.a)((function(t){var e=_slicedToArray(t,3),n=e[0],i=e[1],c=e[2];return 0!==c[1].length?[{},c[1]]:Object(M.k)(c[0].options,"rc","Serve")?[Object.assign(Object.assign({},i[0]),n),i[1]]:[{},[new Error("rc-serve is closed. (Tip: Set server option: rc.Serve as true)")]]}))),t}return n}(M.g)),this.download$.deploy(),this.download$.getSupersetOutput().subscribe((function(t){0===t[1].length?r.fileSaverService.save(t[0].ajaxRsp.response,t[0].Name):r.toastr.danger("".concat(t[0].remote,":").concat(t[0].Path),"File download failure.")}))}return _createClass(t,[{key:"post",value:function(t){this.trigger.next(t),this.toastr.default(t.Name,"Downloading ...")}}]),t}()).\u0275fac=function(t){return new(t||N)(s.ic(L.a),s.ic(r.mb),s.ic(p),s.ic(Y.a))},N.\u0275prov=s.Ub({token:N,factory:N.\u0275fac,providedIn:"root"}),N),J=["EnableServe"];function W(t,e){if(1&t){var n=s.fc();s.ec(0,"button",6),s.mc("click",(function(){return s.Kc(n),s.oc(2).download()})),s.Uc(1,"download"),s.dc()}}function H(t,e){if(1&t&&s.Zb(0,"app-rng-space-usage-chart",7),2&t){var n=s.oc(2);s.wc("loading",n.loadingAbout)}}function Q(t,e){if(1&t&&(s.ec(0,"div",2),s.Zb(1,"img",3),s.ec(2,"h5"),s.Uc(3),s.dc(),s.Sc(4,W,2,0,"button",4),s.Sc(5,H,1,1,"app-rng-space-usage-chart",5),s.dc()),2&t){var n=s.oc();s.Mb(1),s.wc("src","assets/icons/"+n.typeIcon,s.Nc),s.Mb(2),s.Vc(n.name),s.Mb(1),s.wc("ngIf",!n.isDir),s.Mb(1),s.wc("ngIf",n.isDir)}}function G(t,e){1&t&&(s.ec(0,"div",8),s.ec(1,"h3"),s.Uc(2,'Are you want to enable "rc.Serve"?'),s.dc(),s.ec(3,"span",9),s.Uc(4,' Download featrue needs to enable server option "rc.Serve". '),s.dc(),s.ec(5,"p",10),s.Uc(6,' Nb: You can manually close it in "server setting" page after download completed. '),s.dc(),s.dc(),s.ec(7,"div",11),s.ec(8,"button",12),s.mc("click",(function(){return e.dialogRef.close(!0)})),s.Uc(9," OK "),s.dc(),s.ec(10,"button",13),s.mc("click",(function(){return e.dialogRef.close(!1)})),s.Uc(11," Cancel "),s.dc(),s.dc())}var X,tt=((X=function(){function t(e,n,i,c,r){_classCallCheck(this,t),this.downloadService=e,this.serverSettingService=n,this.modal=i,this.toastrService=c,this.cmdService=r,this.currentDirDetail=!0,this.remote="",this.path="",this.name="",this.isDir=!0,this.typeIcon="",this.downloadTrigger=new y.a,this.aboutTrigger=new y.a,this.loadingAbout=!1}return _createClass(t,[{key:"itemNode",value:function(t){this.remote=t.remote||"",this.path=t.Path||"",this.name=t.Name||"",this.isDir=t.IsDir,this.typeIcon=t.TypeIcon,""!==this.remote&&""!==this.path&&""!==this.name&&(this.currentDirDetail=!1),!this.currentDirDetail&&this.isDir&&(this.loadingAbout=!0,this.aboutTrigger.next({remote:this.remote,path:this.path}))}},{key:"download",value:function(){this.downloadTrigger.next(1)}},{key:"realDownload",value:function(){this.downloadService.post({remote:this.remote,Path:this.path,Name:this.name})}},{key:"ngOnInit",value:function(){var t=this,e=this;this.loadingAbout=!0;var n=new(function(t){_inherits(i,t);var n=_createSuper(i);function i(){var t;return _classCallCheck(this,i),(t=n.apply(this,arguments)).prerequest$=Object(K.a)([e.aboutTrigger,e.cmdService.listCmd$.verify(t.cmd)]).pipe(Object(k.a)((function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1];return 0!==i[1].length?[{},i[1]]:[Object.assign(Object.assign({},i[0]),n),[]]}))),t}return i}(M.p));n.deploy(),n.getOutput().subscribe((function(t){})),this.about$=new(function(t){_inherits(i,t);var e=_createSuper(i);function i(){var t;return _classCallCheck(this,i),(t=e.apply(this,arguments)).prerequest$=n.getSupersetOutput(),t}return i}(M.m)),this.about$.deploy(),this.about$.getOutput().subscribe((function(e){t.loadingAbout=!1,0===e[1].length&&(t.chart.data=e[0].about)})),this.downloadTrigger.pipe(Object(C.a)(this.serverSettingService.options$.getOutput())).subscribe((function(e){var n=_slicedToArray(e,2)[1];Object(M.k)(n[0].options,"rc","Serve")?t.modal.confirm().className("flat-attack").message("Are you sure want to download ".concat(t.name," ?")).isBlocking(!1).open().result.then((function(e){e&&t.realDownload()}),(function(){})):t.modal.open(t.EnableServe,Object(g.m)({isBlocking:!1,className:"flat-attack"},v.b)).result.then((function(e){e&&(t.serverSettingService.setOption({rc:{Serve:!0}}),t.toastrService.default("Download","Try to download again."))}),(function(){}))})),this.initNode&&setTimeout((function(){t.itemNode(t.initNode)}),100)}}]),t}()).\u0275fac=function(t){return new(t||X)(s.Yb(q),s.Yb(Y.a),s.Yb(v.a),s.Yb(r.mb),s.Yb(L.a))},X.\u0275cmp=s.Sb({type:X,selectors:[["app-file-file-detail"]],viewQuery:function(t,e){var n;1&t&&(s.Zc(J,!0),s.Zc(B.a,!0)),2&t&&(s.Fc(n=s.nc())&&(e.EnableServe=n.first),s.Fc(n=s.nc())&&(e.chart=n.first))},inputs:{initNode:"initNode"},decls:3,vars:1,consts:[["class","detail",4,"ngIf"],["EnableServe",""],[1,"detail"],[3,"src"],["nbButton","",3,"click",4,"ngIf"],[3,"loading",4,"ngIf"],["nbButton","",3,"click"],[3,"loading"],[1,"vex-dialog-message"],[2,"padding","1rem 0.5rem"],[2,"text-indent","1rem"],[1,"vex-dialog-buttons"],["type","button",1,"vex-dialog-button","vex-dialog-button-primary","vex-first",3,"click"],["type","button",1,"vex-dialog-button","vex-dialog-button-secondary","vex-last",3,"click"]],template:function(t,e){1&t&&(s.Sc(0,Q,6,4,"div",0),s.Sc(1,G,12,0,"ng-template",null,1,s.Tc)),2&t&&s.wc("ngIf",!e.currentDirDetail)},directives:[i.o,r.k,B.a],styles:["div.detail[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0 1.25rem;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t}\n\t\t\timg[_ngcontent-%COMP%] {\n\t\t\t\twidth: 8rem;\n\t\t\t\tmargin: 0 auto;\n\t\t\t}\n\t\t\th5[_ngcontent-%COMP%] {\n\t\t\t\toverflow-wrap: break-word;\n\t\t\t}\n\t\t\t.vex-dialog-message[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t}"]}),X),et=n("pLZG"),nt=["table"];function it(t,e){if(1&t){var n=s.fc();s.ec(0,"nb-checkbox",3),s.mc("indeterminateChange",(function(t){return s.Kc(n),s.oc().checAllInteral=t}))("checkedChange",(function(t){return s.Kc(n),s.oc().checkAll=t}))("checkedChange",(function(t){return s.Kc(n),s.oc().onToggleAll(t)})),s.dc()}if(2&t){var i=s.oc();s.wc("indeterminate",i.checAllInteral)("checked",i.checkAll)}}function ct(t,e){if(1&t&&s.Zb(0,"nb-icon",11),2&t){var n=s.oc().$implicit;s.wc("icon",n.ManipulateIcon)}}function rt(t,e){if(1&t){var n=s.fc();s.ec(0,"td",4),s.mc("dblclick",(function(t){return s.Kc(n),t.stopPropagation()}))("click",(function(t){s.Kc(n);var i=e.$implicit,c=s.oc();return c.toggle(i),c.stopEvent(t)})),s.ec(1,"nb-checkbox",5),s.mc("checkedChange",(function(t){return s.Kc(n),e.$implicit.check=t}))("checkedChange",(function(){return s.Kc(n),s.oc().onToggle()})),s.dc(),s.dc(),s.ec(2,"td",6),s.mc("click",(function(t){s.Kc(n);var i=e.$implicit,c=s.oc();return c.toggle(i),c.stopEvent(t)}))("dblclick",(function(t){return s.Kc(n),s.oc().stopEvent(t)})),s.Sc(3,ct,1,1,"nb-icon",7),s.dc(),s.ec(4,"td",8),s.Zb(5,"img",9),s.dc(),s.ec(6,"td",10),s.Uc(7),s.dc(),s.ec(8,"td",10),s.Uc(9),s.dc(),s.ec(10,"td",10),s.Uc(11),s.dc(),s.ec(12,"td",10),s.Uc(13),s.dc()}if(2&t){var i=e.$implicit;s.Mb(1),s.wc("checked",i.check),s.Mb(2),s.wc("ngIf",i.ManipulateIcon),s.Mb(2),s.wc("src","assets/icons/"+i.TypeIcon,s.Nc),s.Mb(2),s.Vc(i.Name),s.Mb(2),s.Vc(i.SizeHumanReadable),s.Mb(2),s.Vc(i.ModTimeHumanReadable),s.Mb(2),s.Vc(i.MimeType)}}var ot,at,st=((at=function(){function t(e){_classCallCheck(this,t),this.clipboardService=e,this.columns=[{key:"manipulation",title:"",width:"3%",searchEnabled:!1,orderEnabled:!1},{key:"TypeIcon",title:"",width:"3%",searchEnabled:!1},{key:"Name",title:"Name",width:"50%"},{key:"Size",title:"Size",width:"10%"},{key:"ModTimeMoment",title:"Modified Time",width:"17%"},{key:"MimeType",title:"MIME Type",width:"17%"}],this.checkAll=!1,this.checAllInteral=!1,this.jump=new s.r,this.showDetail=new s.r}return _createClass(t,[{key:"loading",value:function(){this.configuration.isLoading=!0,this.checkAll=!1,this.table.apiEvent({type:a.a.setPaginationCurrentPage,value:1})}},{key:"eventEmitted",value:function(t){if("onDoubleClick"===t.event){var e=t.value.row;e.IsDir&&(this.jump.emit({remote:this.remote,path:e.Path}),this.loading())}else"onClick"===t.event&&this.pcDetailViewEnable?this.showDetail.emit(t.value.row):"onRowContextMenu"!==t.event||this.pcDetailViewEnable||this.showDetail.emit(t.value.row)}},{key:"onToggleAll",value:function(t){this.data.forEach((function(e){return e.check=t})),this.checAllInteral=!1}},{key:"onToggle",value:function(){var t=this.data.map((function(t){return+!!t.check})).reduce((function(t,e){return t+e}));t===this.data.length?(this.checkAll=!0,this.checAllInteral=!1):0===t?(this.checkAll=!1,this.checAllInteral=!1):(this.checkAll=!1,this.checAllInteral=!0)}},{key:"toggle",value:function(t){t.check=!t.check,this.onToggle()}},{key:"manipulate",value:function(t){var e=this;this.data.forEach((function(n){n.check&&(e.clipboardService.add(t,e.remote,n),n.check=!1,n.ManipulateIcon=e.manipulate2Icon(t))})),this.onToggle()}},{key:"manipulate2Icon",value:function(t){return"del"===t?"trash-2":t}},{key:"ngOnInit",value:function(){var t=this;this.configuration=Object.assign({},a.c),this.configuration.searchEnabled=!0,this.configuration.checkboxes=!0,this.configuration.isLoading=!0,this.configuration.showContextMenu=!0,this.listScrb=this.listExtends$.getOutput().subscribe((function(e){t.checkAll=!1,t.configuration.isLoading=!1,0===e[1].length?(t.remote=e[0].remote,t.data=e[0].list,t.data.forEach((function(e){e.check=!1,e.ManipulateIcon=t.manipulate2Icon(e.Manipulation)}))):t.data=void 0}))}},{key:"ngOnDestroy",value:function(){this.listScrb.unsubscribe(),this.loading()}},{key:"stopEvent",value:function(t){t.stopPropagation(),t.preventDefault()}}]),t}()).\u0275fac=function(t){return new(t||at)(s.Yb(T))},at.\u0275cmp=s.Sb({type:at,selectors:[["app-manager-list-view"]],viewQuery:function(t,e){var n;1&t&&s.Zc(nt,!0),2&t&&s.Fc(n=s.nc())&&(e.table=n.first)},inputs:{listExtends$:"listExtends$",pcDetailViewEnable:"pcDetailViewEnable"},outputs:{jump:"jump",showDetail:"showDetail"},decls:5,vars:4,consts:[["secAll",""],[3,"configuration","data","columns","selectAllTemplate","event"],["table",""],[3,"indeterminate","checked","indeterminateChange","checkedChange"],[3,"dblclick","click"],[3,"checked","checkedChange"],[3,"click","dblclick"],["class","manipulation","status","info",3,"icon",4,"ngIf"],[1,"rng-noselect",2,"padding","0"],[3,"src"],[1,"rng-noselect"],["status","info",1,"manipulation",3,"icon"]],template:function(t,e){if(1&t&&(s.Sc(0,it,1,2,"ng-template",null,0,s.Tc),s.ec(2,"ngx-table",1,2),s.mc("event",(function(t){return e.eventEmitted(t)})),s.Sc(4,rt,14,7,"ng-template"),s.dc()),2&t){var n=s.Gc(1);s.Mb(2),s.wc("configuration",e.configuration)("data",e.data)("columns",e.columns)("selectAllTemplate",n)}},directives:[a.b,r.t,i.o,r.z],styles:["nb-icon.manipulation[_ngcontent-%COMP%] {\n\t\t\t\t\n\t\t\t\tfont-size: 0.625rem;\n\t\t\t\theight: 0.75rem;\n\t\t\t\twidth: 0.75rem;\n\t\t\t\tmargin-top: -0.125rem;\n\t\t\t\tmargin-bottom: -0.125rem;\n\t\t\t}"]}),at),lt=((ot=function(){function t(e,n){_classCallCheck(this,t),this.connectService=e,this.clipboard=n,this.jump=new s.r,this.showDetail=new s.r,this.listTrigger=new y.a}return _createClass(t,[{key:"loading",value:function(){this.listView.loading()}},{key:"refresh",value:function(){this.loading(),this.list$.clearCache(),this.listTrigger.next(1)}},{key:"manipulate",value:function(t){this.listView.manipulate(t),this.clipboard.commit()}},{key:"ngOnInit",value:function(){var t=this;this.list$=new(function(e){_inherits(i,e);var n=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=n.apply(this,arguments)).prerequest$=Object(K.a)([t.listTrigger,t.nav$.getOutput(),t.connectService.listCmd$.verify(e.cmd)]).pipe(Object(k.a)((function(t){var e=_slicedToArray(t,3),n=e[1],i=e[2];return 0!==n[1].length||0!==i[1].length?[{},[].concat(n[1],i[1])]:[Object.assign(Object.assign({},n[0]),i[0]),[]]})),Object(et.a)((function(t){return 0!==t[1].length||!!t[0].remote}))),e}return i}(M.q)),this.list$.deploy(),this.listExtends$=new(function(e){_inherits(i,e);var n=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=n.apply(this,arguments)).prerequest$=Object(K.a)([t.list$.getSupersetOutput(),t.clipboard.clipboard$.getOutput()]).pipe(Object(k.a)((function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1];return[Object.assign(Object.assign({},n[0]),i[0]),[].concat(n[1],i[1])]}))),e}return i}(O.e)),this.listExtends$.deploy(),this.listTrigger.next(1)}}]),t}()).\u0275fac=function(t){return new(t||ot)(s.Yb(L.a),s.Yb(T))},ot.\u0275cmp=s.Sb({type:ot,selectors:[["app-manager-file-mode"]],viewQuery:function(t,e){var n;1&t&&s.Zc(st,!0),2&t&&s.Fc(n=s.nc())&&(e.listView=n.first)},inputs:{nav$:"nav$",pcDetailViewEnable:"pcDetailViewEnable"},outputs:{jump:"jump",showDetail:"showDetail"},decls:1,vars:2,consts:[[3,"listExtends$","pcDetailViewEnable","jump","showDetail"]],template:function(t,e){1&t&&(s.ec(0,"app-manager-list-view",0),s.mc("jump",(function(t){return e.jump.emit(t)}))("showDetail",(function(t){return e.showDetail.emit(t)})),s.dc()),2&t&&s.wc("listExtends$",e.listExtends$)("pcDetailViewEnable",e.pcDetailViewEnable)},directives:[st],encapsulation:2}),ot);function ut(t,e){if(1&t&&(s.cc(0),s.ec(1,"tr"),s.ec(2,"td"),s.ec(3,"p"),s.Uc(4),s.dc(),s.dc(),s.dc(),s.ec(5,"tr"),s.ec(6,"td",6),s.Zb(7,"nb-progress-bar",7),s.dc(),s.dc(),s.bc()),2&t){var n=s.oc();s.Mb(4),s.Vc(123),s.Mb(3),s.wc("value",n.value)("displayValue",!0)}}var dt,pt=((dt=function(){function t(){_classCallCheck(this,t),this.title="unknow",this.subtitle="",this.value=0,this.easyMode=!1}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||dt)},dt.\u0275cmp=s.Sb({type:dt,selectors:[["app-home-view-remote"]],inputs:{title:"title",subtitle:"subtitle",value:"value",easyMode:"easyMode"},decls:8,vars:3,consts:[[1,"grid-container"],["rowspan","2",2,"padding-right","1rem"],["icon","hard-drive"],[2,"width","100%"],[1,"rng-noselect"],[4,"ngIf"],["colspan","2"],["size","tiny",3,"value","displayValue"]],template:function(t,e){1&t&&(s.ec(0,"table",0),s.ec(1,"tr"),s.ec(2,"td",1),s.Zb(3,"nb-icon",2),s.dc(),s.ec(4,"td",3),s.ec(5,"p",4),s.Uc(6),s.dc(),s.dc(),s.dc(),s.Sc(7,ut,8,3,"ng-container",5),s.dc()),2&t&&(s.Mb(4),s.Nb("rowspan",e.easyMode?2:1),s.Mb(2),s.Vc(e.title),s.Mb(1),s.wc("ngIf",!e.easyMode))},directives:[r.z,i.o,r.Q],styles:[".grid-container[_ngcontent-%COMP%] {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 4rem;\n\t\t\t\tcursor: pointer;\n\t\t\t\t\n\t\t\t}\n\t\t\ttd[_ngcontent-%COMP%]    > p[_ngcontent-%COMP%] {\n\t\t\t\tmargin-bottom: 0;\n\t\t\t}"]}),dt);function ht(t,e){if(1&t){var n=s.fc();s.ec(0,"app-home-view-remote",5),s.mc("click",(function(){s.Kc(n);var t=s.oc().$implicit;return s.oc().showDetail.emit({remote:t})}))("dblclick",(function(){s.Kc(n);var t=s.oc().$implicit;return s.oc().jump.emit({remote:t})})),s.dc()}if(2&t){var i=s.oc().$implicit;s.wc("easyMode",!0)("title",i)}}function ft(t,e){if(1&t){var n=s.fc();s.ec(0,"app-home-view-remote",6),s.mc("contextmenu",(function(t){s.Kc(n);var e=s.oc().$implicit;return s.oc().showDetail.emit({remote:e}),t.preventDefault(),t.stopPropagation()}))("click",(function(){s.Kc(n);var t=s.oc().$implicit;return s.oc().jump.emit({remote:t})})),s.dc()}if(2&t){var i=s.oc().$implicit;s.wc("easyMode",!0)("title",i)}}var bt=function(t,e){return{"cloud col-sm-6":!0,"col-xl-3 col-md-4":t,"col-lg-4 col-md-6":e}},mt=function(){return["xs"]};function gt(t,e){if(1&t&&(s.ec(0,"div",2),s.Sc(1,ht,1,2,"app-home-view-remote",3),s.Sc(2,ft,1,2,"app-home-view-remote",4),s.dc()),2&t){var n=s.oc();s.wc("ngClass",s.Bc(3,bt,!n.pcDetailView,n.pcDetailView)),s.Mb(1),s.wc("hideItBootstrap",s.zc(6,mt)),s.Mb(1),s.wc("showItBootstrap",s.zc(7,mt))}}var vt,yt=((vt=function(){function t(e){_classCallCheck(this,t),this.cmdService=e,this.remotes=[],this.jump=new s.r,this.showDetail=new s.r,this.remotesTrigger=new y.a,this.isLoading=!0}return _createClass(t,[{key:"loading",value:function(){this.isLoading=!0}},{key:"refresh",value:function(){this.loading(),this.remotes$.clearCache(),this.remotesTrigger.next(1)}},{key:"ngOnInit",value:function(){var t=this;this.loading();var e=this;this.remotes$=new(function(t){_inherits(i,t);var n=_createSuper(i);function i(){var t;return _classCallCheck(this,i),(t=n.apply(this,arguments)).prerequest$=Object(K.a)([e.remotesTrigger,e.cmdService.listCmd$.verify(t.cmd)]).pipe(Object(k.a)((function(t){return _slicedToArray(t,2)[1]}))),t}return i}(M.j)),this.remotes$.deploy(),this.remotesTrigger.next(1),this.remotes$.getOutput().subscribe((function(e){t.isLoading=!1,0===e[1].length&&(t.remotes=e[0].remotes)}))}}]),t}()).\u0275fac=function(t){return new(t||vt)(s.Yb(L.a))},vt.\u0275cmp=s.Sb({type:vt,selectors:[["app-manager-home-mode"]],inputs:{pcDetailView:"pcDetailView"},outputs:{jump:"jump",showDetail:"showDetail"},decls:2,vars:2,consts:[["nbSpinnerSize","giant","nbSpinnerStatus","primary","nbSpinnerMessage","Loading...",1,"row","justify-content-start",3,"nbSpinner"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"easyMode","title","click","dblclick",4,"hideItBootstrap"],[3,"easyMode","title","contextmenu","click",4,"showItBootstrap"],[3,"easyMode","title","click","dblclick"],[3,"easyMode","title","contextmenu","click"]],template:function(t,e){1&t&&(s.ec(0,"div",0),s.Sc(1,gt,3,8,"div",1),s.dc()),2&t&&(s.wc("nbSpinner",e.isLoading),s.Mb(1),s.wc("ngForOf",e.remotes))},directives:[r.ab,i.n,i.l,f.a,f.e,pt],styles:[".cloud[_ngcontent-%COMP%]{border-radius:.25rem}.cloud[_ngcontent-%COMP%]:hover{background-color:rgba(89,139,255,.53)}"]}),vt);function wt(t,e){if(1&t&&(s.ec(0,"nb-list-item"),s.Zb(1,"nb-icon",4),s.ec(2,"div"),s.Uc(3),s.dc(),s.dc()),2&t){var n=e.$implicit;s.Mb(1),s.wc("icon",n.v?"checkmark-circle":"close-circle-outline")("status",n.v?"success":"danger"),s.Mb(2),s.Vc(n.k)}}function kt(t,e){if(1&t&&(s.ec(0,"nb-accordion-item"),s.ec(1,"nb-accordion-item-header"),s.Uc(2,"Feature"),s.dc(),s.ec(3,"nb-accordion-item-body"),s.ec(4,"nb-list",2),s.Sc(5,wt,4,3,"nb-list-item",3),s.dc(),s.dc(),s.dc()),2&t){var n=s.oc();s.Mb(4),s.wc("nbSpinner",n.loadingFsinfo),s.Mb(1),s.wc("ngForOf",n.feature)}}function Ct(t,e){if(1&t&&(s.ec(0,"nb-list-item"),s.ec(1,"div"),s.Uc(2),s.dc(),s.dc()),2&t){var n=e.$implicit;s.Mb(2),s.Vc(n)}}function _t(t,e){if(1&t&&(s.ec(0,"nb-accordion-item"),s.ec(1,"nb-accordion-item-header"),s.Uc(2,"Hash Support"),s.dc(),s.ec(3,"nb-accordion-item-body"),s.ec(4,"nb-list",2),s.Sc(5,Ct,3,1,"nb-list-item",3),s.dc(),s.dc(),s.dc()),2&t){var n=s.oc();s.Mb(4),s.wc("nbSpinner",n.loadingFsinfo),s.Mb(1),s.wc("ngForOf",n.hashes)}}var Ot,Mt=((Ot=function(){function t(e){_classCallCheck(this,t),this.cmdService=e,this.remote="",this.loadingFsinfo=!1,this.loadingAbout=!1,this.feature=[],this.hashes=[],this.trigger=new y.a}return _createClass(t,[{key:"navNode",value:function(t){this.remote=t.remote||"",this.loadingFsinfo=!0,this.loadingAbout=!0,this.trigger.next(t.remote)}},{key:"ngOnInit",value:function(){var t=this,e=this;this.loadingFsinfo=!1,this.loadingAbout=!1,this.fsinfo$=new(function(t){_inherits(i,t);var n=_createSuper(i);function i(){var t;return _classCallCheck(this,i),(t=n.apply(this,arguments)).prerequest$=Object(K.a)([e.trigger,e.cmdService.listCmd$.verify(t.cmd)]).pipe(Object(k.a)((function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1];return 0!==i[1].length?[{},i[1]]:[Object.assign(Object.assign({},i[0]),{remote:n}),[]]}))),t}return i}(M.p)),this.fsinfo$.deploy(),this.fsinfo$.getOutput().subscribe((function(e){if(t.loadingFsinfo=!1,0===e[1].length){var n=e[0]["fs-info"];t.feature=Object.keys(n.Features).map((function(t){return{k:t,v:n.Features[t]}})),t.hashes=n.Hashes}})),this.about$=new(function(t){_inherits(i,t);var n=_createSuper(i);function i(){var t;return _classCallCheck(this,i),(t=n.apply(this,arguments)).prerequest$=e.fsinfo$.getSupersetOutput(),t}return i}(M.m)),this.about$.deploy(),this.about$.getOutput().subscribe((function(e){t.loadingAbout=!1,0===e[1].length&&(t.chart.data=e[0].about)})),this.initNode&&setTimeout((function(){t.navNode(t.initNode)}),100)}}]),t}()).\u0275fac=function(t){return new(t||Ot)(s.Yb(L.a))},Ot.\u0275cmp=s.Sb({type:Ot,selectors:[["app-home-remote-detail"]],viewQuery:function(t,e){var n;1&t&&s.Zc(B.a,!0),2&t&&s.Fc(n=s.nc())&&(e.chart=n.first)},inputs:{initNode:"initNode"},decls:6,vars:4,consts:[[3,"loading"],[4,"ngIf"],["nbSpinnerSize","giant","nbSpinnerStatus","primary",3,"nbSpinner"],[4,"ngFor","ngForOf"],[3,"icon","status"]],template:function(t,e){1&t&&(s.ec(0,"h5"),s.Uc(1),s.dc(),s.Zb(2,"app-rng-space-usage-chart",0),s.ec(3,"nb-accordion"),s.Sc(4,kt,6,2,"nb-accordion-item",1),s.Sc(5,_t,6,2,"nb-accordion-item",1),s.dc()),2&t&&(s.Mb(1),s.Vc(e.remote),s.Mb(1),s.wc("loading",e.loadingAbout),s.Mb(2),s.wc("ngIf",e.feature.length),s.Mb(1),s.wc("ngIf",e.hashes.length))},directives:[B.a,r.a,i.o,r.c,r.d,r.b,r.J,r.ab,i.n,r.K,r.z],styles:["h5[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0 1.25rem;\n\t\t\t}\n\t\t\tnb-list[_ngcontent-%COMP%] {\n\t\t\t\tmargin: 0 -0.5rem;\n\t\t\t}\n\t\t\tnb-list-item[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0.5rem 0;\n\t\t\t}\n\t\t\tnb-list-item[_ngcontent-%COMP%]    > nb-icon[_ngcontent-%COMP%] {\n\t\t\t\twidth: 1rem;\n\t\t\t\theight: 1rem;\n\t\t\t}\n\t\t\tnb-list-item[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\n\t\t\t\tpadding-left: 0.5rem;\n\t\t\t}"]}),Ot),St=n("Cfvw"),It=n("1uah"),jt=n("5+tZ"),Dt=n("w1tV"),xt=n("D0XW"),Tt=function(){function t(e,n){_classCallCheck(this,t),this.period=e,this.scheduler=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new $t(t,this.period,this.scheduler))}}]),t}(),$t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,c){var r;return _classCallCheck(this,n),(r=e.call(this,t)).period=i,r.scheduler=c,r.hasValue=!1,r.add(c.schedule(Pt,i,{subscriber:_assertThisInitialized(r),period:i})),r}return _createClass(n,[{key:"_next",value:function(t){this.lastValue=t,this.hasValue=!0}},{key:"notifyNext",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}]),n}(S.a);function Pt(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}var At,Ft=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(n("1dzC").c),Et=((At=function(){function t(e,n){_classCallCheck(this,t),this.cbService=e,this.connectService=n,this.createTrigger=new y.a,this.tasksPool=new O.a,this.tasksFailure=new O.a,this.postTrigger=new y.a,this.postConcurrentCount=1,this.emptySlot=this.postConcurrentCount,this.detailTrigger=new y.a,this.deployCreate(),this.deployPost(),this.deployCopyFile(),this.deployMoveFile(),this.deployDeleteFile(),this.deploySyncCopy(),this.deploySyncMove(),this.deployPurge(),this.deployDetail()}return _createClass(t,[{key:"createTask",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.createTrigger.next([t,n])}},{key:"deployCreate",value:function(){var t=this;this.createTrigger.pipe(Object(C.a)(this.cbService.clipboard$.getOutput())).subscribe((function(e){var n,i=_slicedToArray(e,2),c=_slicedToArray(i[0],2),r=c[0],o=c[1],a=i[1];0===a[1].length&&(a[0].clipboard.values.filter((function(t){return o.some((function(e){return e===t.oper}))})).forEach((function(e){return t.tasksPool.add(e.oper,e.srcRemote,e.srcItem,r)})),(n=t.cbService).clear.apply(n,_toConsumableArray(o)),t.cbService.commit(),t.postTrigger.next(1))}))}},{key:"deployPost",value:function(){var t=this;this.post$=this.postTrigger.pipe(Object(_.a)((function(){return t.emptySlot>0&&t.tasksPool.size>0})),Object(jt.a)((function(){var e=t.tasksPool.values,n=e.slice(0,Math.min(e.length,t.emptySlot));return t.emptySlot=0,Object(St.a)(n)})),Object(Dt.a)())}},{key:"deployCopyFile",value:function(){var t=this,e=this,n=e.post$.pipe(Object(et.a)((function(t){return"copy"===t.oper&&!t.srcItem.IsDir})));this.copyFile$=new(function(t){_inherits(c,t);var i=_createSuper(c);function c(){var t;return _classCallCheck(this,c),(t=i.apply(this,arguments)).prerequest$=n.pipe(Object(C.a)(e.connectService.listCmd$.verify(t.cmd)),Object(k.a)((function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1];return 0!==i[1].length?[{},i[1]]:[Object.assign(Object.assign({},i[0]),{srcFs:"".concat(n.srcRemote,":"),srcRemote:n.srcItem.Path,dstFs:"".concat(n.dst.remote,":"),dstRemote:[n.dst.path,n.srcItem.Name].join("/")}),[]]}))),t}return c}(M.n)),this.copyFile$.deploy(),Object(It.a)(this.copyFile$.getOutput(),n).subscribe((function(e){t.postAfter.apply(t,_toConsumableArray(e))}))}},{key:"postAfter",value:function(t,e){this.tasksPool.pop(e.srcRemote,e.srcItem.Path),this.emptySlot++,0!==t[1].length&&this.tasksFailure.add(e.oper,e.srcRemote,e.srcItem,e.dst),this.detailTrigger.next(1),this.postTrigger.next(1)}},{key:"deployMoveFile",value:function(){var t=this,e=this,n=e.post$.pipe(Object(et.a)((function(t){return"move"===t.oper&&!t.srcItem.IsDir})));this.moveFile$=new(function(t){_inherits(c,t);var i=_createSuper(c);function c(){var t;return _classCallCheck(this,c),(t=i.apply(this,arguments)).prerequest$=n.pipe(Object(C.a)(e.connectService.listCmd$.verify(t.cmd)),Object(k.a)((function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1];return 0!==i[1].length?[{},i[1]]:[Object.assign(Object.assign({},i[0]),{srcFs:"".concat(n.srcRemote,":"),srcRemote:n.srcItem.Path,dstFs:"".concat(n.dst.remote,":"),dstRemote:[n.dst.path,n.srcItem.Name].join("/")}),[]]}))),t}return c}(M.s)),this.moveFile$.deploy(),Object(It.a)(this.moveFile$.getOutput(),n).subscribe((function(e){t.postAfter.apply(t,_toConsumableArray(e))}))}},{key:"deployDeleteFile",value:function(){var t=this,e=this,n=e.post$.pipe(Object(et.a)((function(t){return"del"===t.oper&&!t.srcItem.IsDir})));this.deleteFile$=new(function(t){_inherits(c,t);var i=_createSuper(c);function c(){var t;return _classCallCheck(this,c),(t=i.apply(this,arguments)).prerequest$=n.pipe(Object(C.a)(e.connectService.listCmd$.verify(t.cmd)),Object(k.a)((function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1];return 0!==i[1].length?[{},i[1]]:[Object.assign(Object.assign({},i[0]),{srcFs:"".concat(n.srcRemote,":"),srcRemote:n.srcItem.Path}),[]]}))),t}return c}(M.o)),this.deleteFile$.deploy(),Object(It.a)(this.deleteFile$.getOutput(),n).subscribe((function(e){t.postAfter.apply(t,_toConsumableArray(e))}))}},{key:"deploySyncCopy",value:function(){var t=this,e=this,n=e.post$.pipe(Object(et.a)((function(t){return"copy"===t.oper&&t.srcItem.IsDir})));this.syncCopy$=new(function(t){_inherits(c,t);var i=_createSuper(c);function c(){var t;return _classCallCheck(this,c),(t=i.apply(this,arguments)).prerequest$=n.pipe(Object(C.a)(e.connectService.listCmd$.verify(t.cmd)),Object(k.a)((function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1];return 0!==i[1].length?[{},i[1]]:[Object.assign(Object.assign({},i[0]),{srcFs:"".concat(n.srcRemote,":").concat(n.srcItem.Path),dstFs:"".concat(n.dst.remote,":").concat([n.dst.path,n.srcItem.Name].join("/"))}),[]]}))),t}return c}(M.w)),this.syncCopy$.deploy(),Object(It.a)(this.syncCopy$.getOutput(),n).subscribe((function(e){t.postAfter.apply(t,_toConsumableArray(e))}))}},{key:"deploySyncMove",value:function(){var t=this,e=this,n=e.post$.pipe(Object(et.a)((function(t){return"move"===t.oper&&t.srcItem.IsDir})));this.syncMove$=new(function(t){_inherits(c,t);var i=_createSuper(c);function c(){var t;return _classCallCheck(this,c),(t=i.apply(this,arguments)).prerequest$=n.pipe(Object(C.a)(e.connectService.listCmd$.verify(t.cmd)),Object(k.a)((function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1];return 0!==i[1].length?[{},i[1]]:[Object.assign(Object.assign({},i[0]),{srcFs:"".concat(n.srcRemote,":").concat(n.srcItem.Path),dstFs:"".concat(n.dst.remote,":").concat([n.dst.path,n.srcItem.Name].join("/")),deleteEmptySrcDirs:!1}),[]]}))),t}return c}(M.x)),this.syncMove$.deploy(),Object(It.a)(this.syncMove$.getOutput(),n).subscribe((function(e){t.postAfter.apply(t,_toConsumableArray(e))}))}},{key:"deployPurge",value:function(){var t=this,e=this,n=e.post$.pipe(Object(et.a)((function(t){return"del"===t.oper&&t.srcItem.IsDir})));this.purge$=new(function(t){_inherits(c,t);var i=_createSuper(c);function c(){var t;return _classCallCheck(this,c),(t=i.apply(this,arguments)).prerequest$=n.pipe(Object(C.a)(e.connectService.listCmd$.verify(t.cmd)),Object(k.a)((function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1];return 0!==i[1].length?[{},i[1]]:[Object.assign(Object.assign({},i[0]),{srcFs:"".concat(n.srcRemote,":"),srcRemote:n.srcItem.Path}),[]]}))),t}return c}(M.t)),this.purge$.deploy(),Object(It.a)(this.purge$.getOutput(),n).subscribe((function(e){t.postAfter.apply(t,_toConsumableArray(e))}))}},{key:"deployDetail",value:function(){var t=this;this.detail$=new(function(e){_inherits(i,e);var n=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=n.apply(this,arguments)).prerequest$=t.detailTrigger.pipe(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xt.a;return function(n){return n.lift(new Tt(t,e))}}(1e3),I([{order:t.tasksPool,failure:t.tasksFailure},[]])),e}return i}(Ft)),this.detail$.deploy()}},{key:"retryFailureTasks",value:function(){var t=this;this.tasksFailure.values.forEach((function(e){t.tasksPool.add(e.oper,e.srcRemote,e.srcItem,e.dst)})),this.removeFailureTasks(),this.postTrigger.next(1)}},{key:"removeFailureTasks",value:function(){this.tasksPool.clear(),this.detailTrigger.next(1)}}]),t}()).\u0275fac=function(t){return new(t||At)(s.ic(T),s.ic(L.a))},At.\u0275prov=s.Ub({token:At,factory:At.\u0275fac,providedIn:"root"}),At);function Vt(t,e){if(1&t&&(s.ec(0,"td"),s.Zb(1,"nb-icon",6),s.dc(),s.ec(2,"td"),s.Uc(3),s.dc(),s.ec(4,"td"),s.Uc(5),s.dc(),s.ec(6,"td"),s.Uc(7),s.dc(),s.ec(8,"td"),s.Uc(9),s.dc()),2&t){var n=e.$implicit,i=s.oc();s.Mb(1),s.wc("icon",i.manipulate2Icon(n.oper)),s.Mb(2),s.Vc(n.srcRemote),s.Mb(2),s.Vc(n.srcItem.Path),s.Mb(2),s.Vc(n.dst.remote),s.Mb(2),s.Vc(n.dst.path)}}function Rt(t,e){if(1&t&&(s.ec(0,"td"),s.Zb(1,"nb-icon",6),s.dc(),s.ec(2,"td"),s.Uc(3),s.dc(),s.ec(4,"td"),s.Uc(5),s.dc(),s.ec(6,"td"),s.Uc(7),s.dc(),s.ec(8,"td"),s.Uc(9),s.dc()),2&t){var n=e.$implicit,i=s.oc(2);s.Mb(1),s.wc("icon",i.manipulate2Icon(n.oper)),s.Mb(2),s.Vc(n.srcRemote),s.Mb(2),s.Vc(n.srcItem.Path),s.Mb(2),s.Vc(n.dst.remote),s.Mb(2),s.Vc(n.dst.path)}}function Ut(t,e){if(1&t){var n=s.fc();s.ec(0,"nb-accordion-item"),s.ec(1,"nb-accordion-item-header"),s.Uc(2," Failure "),s.ec(3,"button",7),s.mc("click",(function(){return s.Kc(n),s.oc().retryFailure()})),s.Uc(4," Retry "),s.dc(),s.ec(5,"button",8),s.mc("click",(function(){return s.Kc(n),s.oc().removeFailure()})),s.Uc(6," Remove "),s.dc(),s.dc(),s.ec(7,"nb-accordion-item-body"),s.ec(8,"ngx-table",9,10),s.Sc(10,Rt,10,5,"ng-template"),s.dc(),s.dc(),s.dc()}if(2&t){var i=s.oc();s.Mb(8),s.wc("configuration",i.conf)("data",i.failData)("columns",i.columns)}}var Nt,Zt=((Nt=function(){function t(e,n){_classCallCheck(this,t),this.service=e,this.dialog=n,this.columns=[{key:"oper",title:"",width:"3%"},{key:"srcRemote",title:"Source Remote",width:"10%"},{key:"srcItem.Path",title:"Source Path",width:"35%"},{key:"dst.remote",title:"Destination Remote",width:"10%"},{key:"dst.path",title:"Destination Path",width:"35%"}],this.orderSize=0,this.orderData=[],this.failSize=0,this.failData=[],this.context=n.context}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.service.detail$.getOutput().subscribe((function(e){if(0===e[1].length){var n=e[0].order,i=e[0].failure;t.orderSize=n.size,t.failSize=i.size,t.orderData=n.values,t.failData=i.values}}))}},{key:"manipulate2Icon",value:function(t){return"del"===t?"trash-2":t}},{key:"retryFailure",value:function(){this.service.retryFailureTasks()}},{key:"removeFailure",value:function(){this.service.removeFailureTasks()}}]),t}()).\u0275fac=function(t){return new(t||Nt)(s.Yb(Et),s.Yb(g.d))},Nt.\u0275cmp=s.Sb({type:Nt,selectors:[["app-manager-tasks-dialog"]],decls:15,vars:4,consts:[[1,"dialog-card"],["icon","email-outline",1,"clipboard-icon"],["multi",""],["id","order",3,"configuration","data","columns"],["orderTable",""],[4,"ngIf"],[3,"icon"],["nbButton","","ghost","","status","warning",1,"right",3,"click"],["nbButton","","ghost","","status","danger",1,"rightest",3,"click"],["id","fail",3,"configuration","data","columns"],["failTasksTable",""]],template:function(t,e){1&t&&(s.ec(0,"nb-card",0),s.ec(1,"nb-card-header"),s.ec(2,"nb-action"),s.Zb(3,"nb-icon",1),s.dc(),s.Uc(4," Tasks "),s.dc(),s.ec(5,"nb-card-body"),s.ec(6,"nb-accordion",2),s.ec(7,"nb-accordion-item"),s.ec(8,"nb-accordion-item-header"),s.Uc(9," Order "),s.dc(),s.ec(10,"nb-accordion-item-body"),s.ec(11,"ngx-table",3,4),s.Sc(13,Vt,10,5,"ng-template"),s.dc(),s.dc(),s.dc(),s.Sc(14,Ut,11,3,"nb-accordion-item",5),s.dc(),s.dc(),s.dc()),2&t&&(s.Mb(11),s.wc("configuration",e.conf)("data",e.orderData)("columns",e.columns),s.Mb(3),s.wc("ngIf",0!==e.failSize))},directives:[r.o,r.r,r.f,r.z,r.n,r.a,r.c,r.d,r.b,a.b,i.o,r.k],styles:["nb-card-footer[_ngcontent-%COMP%], nb-card-header[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\t.dialog-card[_ngcontent-%COMP%] {\n\t\t\t\tmargin: calc(-1em - 3px);\n\t\t\t}\n\t\t\t.clipboard-icon[_ngcontent-%COMP%] {\n\t\t\t\tfont-size: 1.5rem;\n\t\t\t\tmargin-right: 0.5rem;\n\t\t\t}\n\t\t\t.right[_ngcontent-%COMP%] {\n\t\t\t\tmargin-left: auto;\n\t\t\t}\n\t\t\t.rightest[_ngcontent-%COMP%] {\n\t\t\t\tmargin-right: auto;\n\t\t\t}"]}),Nt);function zt(t,e){if(1&t){var n=s.fc();s.ec(0,"a",9),s.mc("click",(function(){return s.Kc(n),s.oc(2).jump.emit({})})),s.Zb(1,"nb-icon",10),s.dc()}}function Kt(t,e){1&t&&s.Zb(0,"nb-icon",10)}function Bt(t,e){if(1&t){var n=s.fc();s.ec(0,"a",9),s.mc("click",(function(){s.Kc(n);var t=s.oc(3);return t.jump.emit(t.genAddr(-1))})),s.Zb(1,"nb-icon",13),s.Uc(2),s.dc()}if(2&t){var i=s.oc(3);s.Mb(2),s.Wc(" ",i.remote," ")}}function Lt(t,e){if(1&t&&(s.ec(0,"div",14),s.Zb(1,"nb-icon",13),s.Uc(2),s.dc()),2&t){var n=s.oc(3);s.Mb(2),s.Wc(" ",n.remote," ")}}var Yt=function(t){return{"breadcrumb-item":!0,active:t}};function qt(t,e){if(1&t&&(s.ec(0,"li",11),s.Sc(1,Bt,3,1,"a",4),s.Sc(2,Lt,3,1,"div",12),s.dc()),2&t){var n=s.oc(2);s.wc("ngClass",s.Ac(3,Yt,!n.path)),s.Mb(1),s.wc("ngIf",n.path),s.Mb(1),s.wc("ngIf",!n.path)}}function Jt(t,e){if(1&t){var n=s.fc();s.ec(0,"li",15),s.ec(1,"a",9),s.mc("click",(function(){s.Kc(n);var t=e.index,i=s.oc(2);return i.jump.emit(i.genAddr(t))})),s.Uc(2),s.dc(),s.dc()}if(2&t){var i=e.$implicit;s.Mb(2),s.Wc(" ",i," ")}}function Wt(t,e){if(1&t&&(s.ec(0,"li",15),s.ec(1,"span",16),s.Uc(2),s.dc(),s.dc()),2&t){var n=s.oc(2);s.Mb(2),s.Vc(n.pathSurfix)}}function Ht(t,e){if(1&t){var n=s.fc();s.ec(0,"ol",2),s.mc("click",(function(){return s.Kc(n),s.oc().editTip()}))("dblclick",(function(){s.Kc(n);var t=s.oc();return t.editMode=!t.editMode})),s.ec(1,"li",3),s.Sc(2,zt,2,0,"a",4),s.Sc(3,Kt,1,0,"nb-icon",5),s.dc(),s.Sc(4,qt,3,5,"li",6),s.Sc(5,Jt,3,1,"li",7),s.Sc(6,Wt,3,1,"li",8),s.dc()}if(2&t){var i=s.oc();s.Mb(2),s.wc("ngIf",i.remote),s.Mb(1),s.wc("ngIf",!i.remote),s.Mb(1),s.wc("ngIf",i.remote),s.Mb(1),s.wc("ngForOf",i.pathPrefix),s.Mb(1),s.wc("ngIf",i.pathSurfix)}}function Qt(t,e){if(1&t){var n=s.fc();s.ec(0,"input",17),s.mc("dblclick",(function(){s.Kc(n);var t=s.oc();return t.editMode=!t.editMode}))("ngModelChange",(function(t){return s.Kc(n),s.oc().fullPath=t}))("keyup.enter",(function(){return s.Kc(n),s.oc().editorJump()})),s.dc()}if(2&t){var i=s.oc();s.wc("ngModel",i.fullPath)}}var Gt,Xt=((Gt=function(){function t(e){_classCallCheck(this,t),this.toastrService=e,this.jump=new s.r,this.editMode=!1}return _createClass(t,[{key:"editTip",value:function(){t.tipable&&(this.toastrService.default("Edit Mode will be actived after double click.","Breadcurmb",{position:r.y.BOTTOM_END,icon:"bulb",duration:5e3}),t.tipable=!1)}},{key:"editorJump",value:function(){if("string"==typeof this.fullPath)if(""!==this.fullPath){var t=this.fullPath.indexOf(":");t>-1?(this.remote=this.fullPath.substring(0,t),this.path=this.fullPath.substring(t+1),this.path.length>1&&this.path.endsWith("/")&&(this.path=this.path.slice(0,this.path.length-1))):(this.remote=this.fullPath,this.path=""),this.jump.emit({remote:this.remote,path:this.path})}else this.remote&&""!==this.remote&&this.jump.emit({});this.editMode=!this.editMode}},{key:"genAddr",value:function(t){return""===this.pathPrefix.slice(0,t+1).join("/")?{remote:this.remote}:{remote:this.remote,path:this.pathPrefix.slice(0,t+1).join("/")}}},{key:"splitPath",value:function(t){if(!t)return[[],void 0];var e=t.split("/");return[e.slice(0,-1),e[e.length-1]]}},{key:"ngOnInit",value:function(){var t=this;this.nav$.getOutput().subscribe((function(e){var n;t.remote=e[0].remote,n=_slicedToArray(t.splitPath(e[0].path),2),t.pathPrefix=n[0],t.pathSurfix=n[1],t.path=e[0].path,t.fullPath="".concat(t.remote?t.remote+":":"").concat(t.path?t.path:"")}))}}]),t}()).tipable=!0,Gt.\u0275fac=function(t){return new(t||Gt)(s.Yb(r.mb))},Gt.\u0275cmp=s.Sb({type:Gt,selectors:[["app-manager-breadcrumb"]],inputs:{nav$:"nav$"},outputs:{jump:"jump"},decls:2,vars:2,consts:[["class","breadcrumb rng-noselect","style","flex-wrap: nowrap; overflow-x: auto;",3,"click","dblclick",4,"ngIf"],["nbInput","","class","editor","fullWidth","",3,"ngModel","dblclick","ngModelChange","keyup.enter",4,"ngIf"],[1,"breadcrumb","rng-noselect",2,"flex-wrap","nowrap","overflow-x","auto",3,"click","dblclick"],[1,"breadcrumb-item","home"],[3,"click",4,"ngIf"],["icon","home-outline",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","breadcrumb-item",4,"ngFor","ngForOf"],["class","breadcrumb-item",4,"ngIf"],[3,"click"],["icon","home-outline"],[3,"ngClass"],["style","display: inline-flex;",4,"ngIf"],["icon","google-outline",2,"vertical-align","middle"],[2,"display","inline-flex"],[1,"breadcrumb-item"],[1,"active"],["nbInput","","fullWidth","",1,"editor",3,"ngModel","dblclick","ngModelChange","keyup.enter"]],template:function(t,e){1&t&&(s.Sc(0,Ht,7,5,"ol",0),s.Sc(1,Qt,1,1,"input",1)),2&t&&(s.wc("ngIf",!e.editMode),s.Mb(1),s.wc("ngIf",e.editMode))},directives:[i.o,i.n,r.z,i.l,r.C,c.a,c.g,c.j],styles:[".breadcrumb[_ngcontent-%COMP%] {\n\t\t\t\tmargin-bottom: 0;\n\t\t\t\twidth: -webkit-fill-available;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\tcursor: text;\n\t\t\t}\n\t\t\t.editor[_ngcontent-%COMP%] {\n\t\t\t\twidth: -webkit-fill-available;\n\t\t\t\t\n\t\t\t}\n\t\t\tli[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: flow-root;\n\t\t\t}\n\t\t\tli[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\n\t\t\t\tbackground: white;\n\t\t\t\tborder-radius: 1rem;\n\t\t\t\tpadding: 0.1545rem 0.5rem;\n\t\t\t\ttext-decoration: unset;\n\t\t\t}\n\t\t\tli[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%]:hover {\n\t\t\t\tbackground: #274bdb;\n\t\t\t\tcolor: white;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t.active[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0.1545rem 1rem 0.1545rem 0;\n\t\t\t}\n\t\t\t.home[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0.1545rem 0.5rem;\n\t\t\t}"]}),Gt),te=["MobileRemoteDetail"],ee=["MobileFileDetail"];function ne(t,e){if(1&t){var n=s.fc();s.ec(0,"a",23),s.mc("click",(function(){return s.Kc(n),s.oc().toggleDetail()})),s.Zb(1,"nb-icon",24),s.dc()}}function ie(t,e){if(1&t){var n=s.fc();s.ec(0,"app-manager-home-mode",25),s.mc("jump",(function(t){return s.Kc(n),s.oc().addrJump(t)}))("showDetail",(function(t){return s.Kc(n),s.oc().openRemoteDetail(t)})),s.dc()}if(2&t){var i=s.oc();s.wc("pcDetailView",i.pcDetailView)}}function ce(t,e){if(1&t){var n=s.fc();s.ec(0,"app-manager-file-mode",26),s.mc("jump",(function(t){return s.Kc(n),s.oc().addrJump(t)}))("showDetail",(function(t){return s.Kc(n),s.oc().openFileDetail(t)})),s.dc()}if(2&t){var i=s.oc();s.wc("pcDetailViewEnable",i.pcDetailViewEnable)("nav$",i.nav$)}}function re(t,e){1&t&&s.Zb(0,"app-home-remote-detail")}function oe(t,e){1&t&&s.Zb(0,"app-file-file-detail")}function ae(t,e){if(1&t&&(s.ec(0,"nb-sidebar",27),s.Sc(1,re,1,0,"app-home-remote-detail",28),s.Sc(2,oe,1,0,"app-file-file-detail",28),s.dc()),2&t){var n=s.oc();s.Mb(1),s.wc("ngIf",n.homeMode),s.Mb(1),s.wc("ngIf",n.fileMode)}}function se(t,e){1&t&&s.Zb(0,"app-home-remote-detail",29),2&t&&s.wc("initNode",e.dialogRef.context.navNode)}function le(t,e){1&t&&s.Zb(0,"app-file-file-detail",29),2&t&&s.wc("initNode",e.dialogRef.context.itemNode)}function ue(t,e){if(1&t){var n=s.fc();s.ec(0,"nb-action",30),s.mc("click",(function(){return s.Kc(n),s.oc().file.manipulate("copy")})),s.dc()}}function de(t,e){if(1&t){var n=s.fc();s.ec(0,"nb-action",31),s.mc("click",(function(){return s.Kc(n),s.oc().file.manipulate("move")})),s.dc()}}function pe(t,e){if(1&t){var n=s.fc();s.ec(0,"nb-action",32),s.mc("click",(function(){return s.Kc(n),s.oc().file.manipulate("del")})),s.dc()}}function he(t,e){if(1&t){var n=s.fc();s.ec(0,"nb-action",33),s.mc("click",(function(){return s.Kc(n),s.oc().paste()})),s.dc()}}function fe(t,e){if(1&t){var n=s.fc();s.ec(0,"nb-action",34),s.mc("click",(function(){return s.Kc(n),s.oc().mkdirDialog()})),s.dc()}}function be(t,e){if(1&t&&s.Zb(0,"nb-badge",35),2&t){var n=s.oc();s.wc("text",n.clipboardSize)}}function me(t,e){if(1&t&&s.Zb(0,"nb-badge",35),2&t){var n=s.oc();s.wc("text",n.orderCnt)}}var ge,ve,ye,we=function(t){return{subcolumn:!0,"subcolumn-right-bar":t}},ke=function(t,e){return{mobile:t,pc:e}},Ce=[{path:"",component:(ge=function(){function t(e,n,i,c,r,o,a,s,l){_classCallCheck(this,t),this.connectService=e,this.toastrService=n,this.clipboard=i,this.taskService=c,this.resp=r,this.modal=o,this.router=a,this.route=s,this.sidebarService=l,this.homeMode=!1,this.fileMode=!1,this.mainBar=!1,this.navTrigger=new y.a,this.mkdirTrigger=new y.a,this.clipboardSize=0,this.pasteTrigger=new y.a,this.orderCnt=0,this.pcDetailViewEnable=!1,this.pcDetailView=!1,this.visable=!1}return _createClass(t,[{key:"loading",value:function(){this.fileMode?this.file.loading():this.homeMode&&this.home.loading()}},{key:"refresh",value:function(){this.homeMode?this.home.refresh():this.fileMode&&this.file.refresh()}},{key:"addrJump",value:function(t){this.loading(),this.navTrigger.next(t)}},{key:"navDeploy",value:function(){var t=this;this.nav$=new(function(e){_inherits(i,e);var n=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=n.apply(this,arguments)).prerequest$=t.navTrigger.pipe(Object(w.a)((function(t,e){return JSON.stringify(t)===JSON.stringify(e)})),Object(k.a)((function(e){var n=e.remote;n&&""===n&&(n=void 0);var i=e.path;return i&&""===i&&(i=void 0),t.homeMode=!n,t.fileMode=!!n,[{remote:n,path:i},[]]}))),e}return i}(O.d)),this.nav$.deploy(),this.navTrigger.next({})}},{key:"mkdirDialog",value:function(){var t=this;this.modal.open(z,Object(g.m)({isBlocking:!1},v.b)).result.then((function(e){e&&""!==e&&t.mkdirTrigger.next(e)}),(function(){}))}},{key:"mkdirDeploy",value:function(){var t=this,e=this;this.mkdir$=new(function(t){_inherits(i,t);var n=_createSuper(i);function i(){var t;return _classCallCheck(this,i),(t=n.apply(this,arguments)).prerequest$=e.mkdirTrigger.pipe(Object(C.a)(e.nav$.getOutput(),e.connectService.listCmd$.verify(t.cmd)),Object(k.a)((function(t){var n=_slicedToArray(t,3),i=n[0],c=n[1],r=n[2],o=[].concat(c[1],r[1]);return 0!==o.length?[{},o]:(c[0].path&&(i=[c[0].path,i].join("/")),e.toastrService.default("Creating directory","Waiting..."),[Object.assign(Object.assign({},r[0]),{remote:c[0].remote,path:i}),[]])}))),t}return i}(M.r)),this.mkdir$.deploy(),this.mkdir$.getOutput().subscribe((function(e){0!==e[1].length?t.toastrService.danger("create dir failure"):t.toastrService.success("create dir success")}))}},{key:"clipboardDeploy",value:function(){var t=this;this.clipboard.clipboard$.getOutput().subscribe((function(e){0===e[1].length&&(t.clipboardSize=e[0].clipboard.values.length)}))}},{key:"pasteDeploy",value:function(){var t=this;this.pasteTrigger.pipe(Object(C.a)(this.nav$.getOutput())).subscribe((function(e){var n,i=_slicedToArray(e,2),c=i[0],r=i[1];if(0!==r[1].length)throw Error("can't not get destination.");(n=t.taskService).createTask.apply(n,[r[0]].concat(_toConsumableArray(c)))}))}},{key:"paste",value:function(){this.pasteTrigger.next(["copy","move"])}},{key:"clipboardDialog",value:function(){var t=this;this.modal.open(Z,Object(g.m)({isBlocking:!1},v.b)).result.then((function(e){!0===e&&t.pasteTrigger.next(["del"])}),(function(){}))}},{key:"tasksDeploy",value:function(){var t=this;this.taskService.detail$.getOutput().subscribe((function(e){0===e[1].length&&(t.orderCnt=e[0].order.size+e[0].failure.size)}))}},{key:"tasksDialog",value:function(){var t=this;this.modal.open(Zt,Object(g.m)({isBlocking:!1},v.b)).result.then((function(e){!0===e&&t.pasteTrigger.next(["del"])}),(function(){}))}},{key:"routeDeploy",value:function(){var t=this;this.route.queryParams.pipe(Object(_.a)((function(){return t.visable})),Object(w.a)((function(t,e){return JSON.stringify(t)===JSON.stringify(e)}))).subscribe((function(e){t.navTrigger.next(e)})),this.nav$.getOutput().pipe(Object(_.a)((function(){return t.visable}))).subscribe((function(e){if(0===e[1].length){var n={};e[0].remote&&""!==e[0].remote&&(n.remote=e[0].remote),e[0].path&&""!==e[0].path&&(n.path=e[0].path),t.router.navigate([],{queryParams:n})}}))}},{key:"sidebarDeploy",value:function(){var t=this;this.resp.getResponsiveSize.subscribe((function(e){t.mainBar=!("xs"===e||"sm"===e||"md"===e),t.pcDetailViewEnable="xs"!==e,"xs"===e&&(t.pcDetailView=!1,t.sidebarService.collapse("detail"))}))}},{key:"toggleDetail",value:function(){this.pcDetailView=!this.pcDetailView,this.sidebarService.toggle(!1,"detail")}},{key:"openRemoteDetail",value:function(t){this.pcDetailView&&this.remoteDetail.navNode(t),this.pcDetailViewEnable||this.modal.open(this.remoteDetailMobile,Object(g.m)({isBlocking:!1,navNode:t},v.b))}},{key:"openFileDetail",value:function(t){this.pcDetailView&&this.fileDetail.itemNode(t),this.pcDetailViewEnable||this.modal.open(this.fileDetailMobile,Object(g.m)({isBlocking:!1,itemNode:t},v.b))}},{key:"ngOnInit",value:function(){this.visable=!0,this.sidebarDeploy(),this.navDeploy(),this.routeDeploy(),this.mkdirDeploy(),this.clipboardDeploy(),this.pasteDeploy(),this.tasksDeploy()}},{key:"ngOnDestroy",value:function(){this.visable=!1}}]),t}(),ge.\u0275fac=function(t){return new(t||ge)(s.Yb(L.a),s.Yb(r.mb),s.Yb(T),s.Yb(Et),s.Yb(f.c),s.Yb(v.a),s.Yb(m.c),s.Yb(m.a),s.Yb(r.Z))},ge.\u0275cmp=s.Sb({type:ge,selectors:[["app-manager"]],viewQuery:function(t,e){var n;1&t&&(s.Zc(lt,!0),s.Zc(yt,!0),s.Zc(Mt,!0),s.Zc(te,!0),s.Zc(tt,!0),s.Zc(ee,!0)),2&t&&(s.Fc(n=s.nc())&&(e.file=n.first),s.Fc(n=s.nc())&&(e.home=n.first),s.Fc(n=s.nc())&&(e.remoteDetail=n.first),s.Fc(n=s.nc())&&(e.remoteDetailMobile=n.first),s.Fc(n=s.nc())&&(e.fileDetail=n.first),s.Fc(n=s.nc())&&(e.fileDetailMobile=n.first))},decls:30,vars:19,consts:[["subheader",""],[3,"nav$","jump"],[1,"push-to-right","option",3,"click"],["icon","refresh"],[1,"option"],["icon","list"],["class","option",3,"click",4,"ngIf"],[3,"ngClass"],[3,"pcDetailView","jump","showDetail",4,"ngIf"],[3,"pcDetailViewEnable","nav$","jump","showDetail",4,"ngIf"],["fixed","","end","","class","right-bar","tag","detail","state","collapsed",4,"ngIf"],["MobileRemoteDetail",""],["MobileFileDetail",""],["icon","copy",3,"click",4,"ngIf"],["icon","move",3,"click",4,"ngIf"],["icon","trash-2",3,"click",4,"ngIf"],["icon","clipboard",3,"click",4,"ngIf"],["icon","folder-add",3,"click",4,"ngIf"],[1,"push-to-right",2,"padding-right","1.5rem","padding-left","0.5rem",3,"click"],["icon","inbox",2,"font-size","1.5rem"],["status","info","position","top end",3,"text",4,"ngIf"],[2,"padding-right","1.5rem","padding-left","0.5rem",3,"click"],["icon","email-outline",2,"font-size","1.5rem"],[1,"option",3,"click"],["icon","info"],[3,"pcDetailView","jump","showDetail"],[3,"pcDetailViewEnable","nav$","jump","showDetail"],["fixed","","end","","tag","detail","state","collapsed",1,"right-bar"],[4,"ngIf"],[3,"initNode"],["icon","copy",3,"click"],["icon","move",3,"click"],["icon","trash-2",3,"click"],["icon","clipboard",3,"click"],["icon","folder-add",3,"click"],["status","info","position","top end",3,"text"]],template:function(t,e){1&t&&(s.ec(0,"nb-layout-header",0),s.ec(1,"app-manager-breadcrumb",1),s.mc("jump",(function(t){return e.addrJump(t)})),s.dc(),s.ec(2,"a",2),s.mc("click",(function(){return e.refresh()})),s.Zb(3,"nb-icon",3),s.dc(),s.ec(4,"a",4),s.Zb(5,"nb-icon",5),s.dc(),s.Sc(6,ne,2,0,"a",6),s.dc(),s.ec(7,"div",7),s.ec(8,"nb-card"),s.ec(9,"nb-card-body"),s.Sc(10,ie,1,1,"app-manager-home-mode",8),s.Sc(11,ce,1,2,"app-manager-file-mode",9),s.dc(),s.dc(),s.dc(),s.Sc(12,ae,3,2,"nb-sidebar",10),s.Sc(13,se,1,1,"ng-template",null,11,s.Tc),s.Sc(15,le,1,1,"ng-template",null,12,s.Tc),s.ec(17,"nb-layout-footer",7),s.ec(18,"nb-actions"),s.Sc(19,ue,1,0,"nb-action",13),s.Sc(20,de,1,0,"nb-action",14),s.Sc(21,pe,1,0,"nb-action",15),s.Sc(22,he,1,0,"nb-action",16),s.Sc(23,fe,1,0,"nb-action",17),s.ec(24,"nb-action",18),s.mc("click",(function(){return e.clipboardDialog()})),s.Zb(25,"nb-icon",19),s.Sc(26,be,1,1,"nb-badge",20),s.dc(),s.ec(27,"nb-action",21),s.mc("click",(function(){return e.tasksDialog()})),s.Zb(28,"nb-icon",22),s.Sc(29,me,1,1,"nb-badge",20),s.dc(),s.dc(),s.dc()),2&t&&(s.Mb(1),s.wc("nav$",e.nav$),s.Mb(5),s.wc("ngIf",e.pcDetailViewEnable),s.Mb(1),s.wc("ngClass",s.Ac(14,we,e.pcDetailView)),s.Mb(3),s.wc("ngIf",e.homeMode),s.Mb(1),s.wc("ngIf",e.fileMode),s.Mb(1),s.wc("ngIf",e.pcDetailViewEnable),s.Mb(5),s.wc("ngClass",s.Bc(16,ke,!e.mainBar,e.mainBar)),s.Mb(2),s.wc("ngIf",e.fileMode),s.Mb(1),s.wc("ngIf",e.fileMode),s.Mb(1),s.wc("ngIf",e.fileMode),s.Mb(1),s.wc("ngIf",e.fileMode),s.Mb(1),s.wc("ngIf",e.fileMode),s.Mb(3),s.wc("ngIf",e.clipboardSize),s.Mb(3),s.wc("ngIf",e.orderCnt))},directives:[r.H,Xt,r.z,i.o,i.l,r.o,r.n,r.G,r.g,r.f,yt,lt,r.X,Mt,tt,r.i],styles:["nb-layout-header[_ngcontent-%COMP%] {\n\t\t\t\tposition: sticky;\n\t\t\t\ttop: 4.75rem;\n\t\t\t\tz-index: 700;\n\t\t\t}\n\t\t\tapp-manager-breadcrumb[_ngcontent-%COMP%] {\n\t\t\t\tdisplay: contents;\n\t\t\t}\n\t\t\t.option[_ngcontent-%COMP%] {\n\t\t\t\tpadding: 0 0.3rem;\n\t\t\t}\n\t\t\t.right-bar[_ngcontent-%COMP%] {\n\t\t\t\ttop: calc(4.75rem * 2 + 0.05rem) !important;\n\t\t\t\tbottom: 65px !important;\n\t\t\t\theight: auto;\n\t\t\t\tz-index: 699;\n\t\t\t}\n\t\t\t[_nghost-%COMP%]   nb-sidebar[_ngcontent-%COMP%]     .main-container {\n\t\t\t\theight: auto !important;\n\t\t\t\ttop: calc(4.75rem * 2 + 0.05rem) !important;\n\t\t\t\tbottom: 65px !important;\n\t\t\t}\n\t\t\t[_nghost-%COMP%]   nb-sidebar[_ngcontent-%COMP%]     .scrollable {\n\t\t\t\tpadding: 1.25rem 0 !important;\n\t\t\t}\n\t\t\t.subcolumn[_ngcontent-%COMP%] {\n\t\t\t\tmargin-bottom: 4.75rem;\n\t\t\t\tmargin-top: 1.5rem;\n\t\t\t}\n\t\t\t.subcolumn-right-bar[_ngcontent-%COMP%] {\n\t\t\t\tmargin-right: 16rem;\n\t\t\t}\n\t\t\t\n\t\t\tnb-layout-footer[_ngcontent-%COMP%] {\n\t\t\t\tz-index: 1001;\n\t\t\t\tposition: fixed;\n\t\t\t\tbottom: 0;\n\t\t\t}\n\t\t\tnb-layout-footer.mobile[_ngcontent-%COMP%] {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\tnb-layout-footer.pc[_ngcontent-%COMP%] {\n\t\t\t\twidth: calc(100% - 16rem);\n\t\t\t}\n\t\t\tnb-layout-footer[_ngcontent-%COMP%]     nav {\n\t\t\t\toverflow-x: auto;\n\t\t\t}\n\t\t\tnb-actions[_ngcontent-%COMP%] {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.push-to-right[_ngcontent-%COMP%] {\n\t\t\t\tmargin-left: auto;\n\t\t\t\t\n\t\t\t}\n\t\t\t.subcolumn[_ngcontent-%COMP%]    > nb-card[_ngcontent-%COMP%] {\n\t\t\t\tmargin: 0 1.25rem;\n\t\t\t}"]}),ge)}],_e=((ye=function t(){_classCallCheck(this,t)}).\u0275mod=s.Wb({type:ye}),ye.\u0275inj=s.Vb({factory:function(t){return new(t||ye)},imports:[[m.g.forChild(Ce)],m.g]}),ye),Oe=((ve=function t(){_classCallCheck(this,t)}).\u0275mod=s.Wb({type:ve}),ve.\u0275inj=s.Vb({factory:function(t){return new(t||ve)},imports:[[i.c,_e,r.h,r.s,r.B,r.R,a.d,r.I,r.Y,r.u,r.l,r.D,r.ob,r.j,r.jb,r.e,r.bb,r.L,o.b,h,b.a,c.d,f.b]]}),ve)},Iab2:function(t,e,n){var i,c;void 0===(c="function"==typeof(i=function(){"use strict";function e(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){r(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var c="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,r=c.saveAs||("object"!=typeof window||window!==c?function(){}:"download"in HTMLAnchorElement.prototype?function(t,r,o){var a=c.URL||c.webkitURL,s=document.createElement("a");s.download=r=r||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?i(s):n(s.href)?e(t,r,o):i(s,s.target="_blank")):(s.href=a.createObjectURL(t),setTimeout((function(){a.revokeObjectURL(s.href)}),4e4),setTimeout((function(){i(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,c,r){if(c=c||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,r),c);else if(n(t))e(t,c,r);else{var o=document.createElement("a");o.href=t,o.target="_blank",setTimeout((function(){i(o)}))}}:function(t,n,i,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,i);var o="application/octet-stream"===t.type,a=/constructor/i.test(c.HTMLElement)||c.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||o&&a)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},l.readAsDataURL(t)}else{var u=c.URL||c.webkitURL,d=u.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout((function(){u.revokeObjectURL(d)}),4e4)}});c.saveAs=r.saveAs=r,t.exports=r})?i.apply(e,[]):i)||(t.exports=c)}}]);